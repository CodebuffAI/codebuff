{
    "clientSessionId": "",
    "filetrees": {
        "100000": "# Project file tree\n\nAs Buffy, you have access to all the files in the project.\n\nThe following is the path to the project on the user's computer. It is also the current working directory for terminal commands:\n<project_path>\n/Users/vrkumar/src/venkr/codebuff\n</project_path>\n\nWithin this project directory, here is the file tree. \nNote that the file tree:\n- Is cached from the start of this conversation. Files created after the start of this conversation will not appear.\n- Excludes files that are .gitignored.\n\n<project_file_tree>\n.env.example\n.eslintrc.json\n.github/\n CODEOWNERS\n workflows/\n  ci.yml\n.gitignore\n.manicodeignore\n.prettierrc\n.vscode/\n settings.json\nREADME.md\nauthentication.knowledge.md\nbackend/\n .gitignore\n README.md\n jest.config.js\n jest.setup.js\n knowledge.md\n package.json\n src/\n  __tests__/\n   auto-topup.test.ts\n   check-new-files-necessary.test.ts\n   credit-conversion.test.ts\n   fast-rewrite.test.ts\n    connect\n   generate-diffs-prompt.test.ts\n   main-prompt.integration.test.ts\n    MockWebSocket send close on removeListener\n   main-prompt.test.ts\n    start MockWebSocket send close on removeListener\n   parse-attributes.test.ts\n   process-file-block.test.ts\n    connect\n   process-stream.test.ts\n   test-data/\n    dex-go/\n     edit-snippet.go\n      TaskRunToolCallReconciler initializeTRTC Context TaskRunToolCall bool error SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan string Span processBuiltinFunction Tool Result float64\n     expected.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan Span checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n     original.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC Time checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n   usage-calculation.test.ts\n  api/\n   usage.ts\n    getUserIdFromAuthToken usageHandler\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n  check-terminal-command.ts\n   checkTerminalCommand\n  env.mjs\n  fast-rewrite.ts\n   fastRewrite rewriteWithOpenAI preserveCommentsInEditSnippet shouldAddFilePlaceholders\n  find-files/\n   check-new-files-necessary.ts\n    checkNewFilesNecessary\n   request-files-prompt.ts\n    requestRelevantFiles getRelevantFiles topLevelDirectories getExampleFileList generateNonObviousRequestFilesPrompt generateKeyRequestFilesPrompt secondPassFindAdditionalFiles generateAdditionalFilesPrompt\n  generate-diffs-prompt.ts\n   parseAndGetDiffBlocksSingleFile retryDiffBlocksPrompt\n  get-documentation-for-query.ts\n   getDocumentationForQuery\n  index.ts\n  llm-apis/\n   claude.ts\n    transformMessages promptClaude promptClaudeWithContinuation\n   context7-api.ts\n    listLibraries context7LibrariesPromise fetchContext7LibraryDocumentation\n   deepseek-api.ts\n    transformMessages promptDeepseekStream start promptDeepseek\n   gemini-api.ts\n    transformMessagesToGoogle promptGeminiStream start cancel promptGemini\n   gemini-vertex-api.ts\n    transformToPart transformMessages transformSystem promptGemini\n   gemini-with-fallbacks.ts\n    promptGeminiWithFallbacks\n   message-cost-tracker.ts\n    syncMessageToStripe logSyncFailure insertMessageRecord sendCostResponseToClient updateUserCycleUsage saveMessage\n   open-router.ts\n    promptOpenRouter\n   openai-api.ts\n    getOpenAI transformMessages promptOpenAI promptOpenAIWithContinuation\n   relace-api.ts\n    sendToRelaceLongContext promptRelaceAI rerank\n   vercel-ai-sdk/\n    ai-sdk.ts\n     promptAiSdkStream promptAiSdk transformMessages promptAiSdk_GeminiFormat\n    vertex-finetuned.ts\n     patchedFetchForFinetune patchString vertexFinetuned\n  main-prompt.ts\n   mainPrompt getRelevantFileInfoMessage getFileReadingUpdates getPrintedPaths\n  process-file-block.ts\n   processFileBlock handleLargeFile\n  process-stream.ts\n   parseAttributes\n  prompt-agent-stream.ts\n   getAgentStream\n  system-prompt/\n   agent-instructions.md\n   agent-system-prompt.ts\n    getAgentSystemPrompt\n   prompts.ts\n    knowledgeFilesPrompt getProjectFileTreePrompt getSystemInfoPrompt getGitChangesPrompt gitCommitGuidePrompt\n   save-agent-request.ts\n    saveAgentRequest\n   search-system-prompt.ts\n    getSearchSystemPrompt\n   truncate-file-tree.ts\n    truncateFileTreeBasedOnTokenBudget pruneFileTokenScores\n  tools.ts\n   parseRawToolCall TOOL_LIST TOOLS_WHICH_END_THE_RESPONSE toolsInstructions updateContext updateContextFromToolCalls readFiles writeFile checkTaskFile runTerminalCommand parseToolCalls appendToLog listDirectory summarizeOutput renderSubgoalUpdate transformRunTerminalCommand\n  util/\n   __tests__/\n    messages.test.ts\n    object.test.ts\n    parse-tool-call-xml.test.ts\n    simplify-tool-results.test.ts\n    split-data.test.ts\n   check-auth.ts\n    checkAuth\n   debug.ts\n    DEBUG_MODE debugLog clearDebugLog\n   logger.ts\n    withLoggerContext pinoLogger mixin splitAndLog logger\n   messages.ts\n    messagesWithSystem getMessageText simplifyTerminalHelper trimMessagesToFitTokenLimit getMessagesSubset\n   object.ts\n    stripNullCharsFromObject\n   parse-tool-call-xml.ts\n    parseToolCallXml renderToolResults parseToolResults renderReadFilesResult parseReadFilesResult isToolResult\n   simplify-tool-results.ts\n    simplifyToolResults simplifyReadFileResults simplifyTerminalCommandResults simplifyReadFileToolResult simplifyTerminalCommandToolResult\n   split-data.ts\n    isPlainObject getJsonSize splitString splitObject splitArray splitDataWithLengths splitData\n   token-counter.ts\n    countTokens countTokensJson countTokensForFiles\n  websockets/\n   auth.ts\n    getUserIdFromAuthToken getUserInfoFromAuthToken\n   middleware.ts\n    WebSocketMiddleware use execute run protec\n   server.ts\n    SWITCHBOARD MessageParseError serializeError processMessage listen sendMessage\n   switchboard.ts\n    Switchboard getClient getAll getSubscribers connect disconnect markSeen subscribe unsubscribe\n   websocket-action.ts\n    sendAction getUserIdFromAuthToken genUsageResponse subscribeToAction onWebsocketAction requestFiles requestFile requestOptionalFile\n tsconfig.json\nbigquery-implementation-plan.md\nbun.lock\ncodebuff.json\ncommon/\n knowledge.md\n package.json\n src/\n  actions.ts\n   FileChangeSchema CHANGES ToolCallSchema CLIENT_ACTION_SCHEMA UsageReponseSchema InitResponseSchema ResponseCompleteSchema MessageCostResponseSchema PromptResponseSchema SERVER_ACTION_SCHEMA\n  api-keys/\n   constants.ts\n    ALGORITHM IV_LENGTH AUTH_TAG_LENGTH API_KEY_TYPES KEY_PREFIXES KEY_LENGTHS READABLE_NAME\n   crypto.ts\n    encryptApiKeyInternal decryptApiKeyInternal encryptAndStoreApiKey retrieveAndDecryptApiKey clearApiKey\n  bigquery/\n   client.ts\n    BigQueryClient initialize insertTrace insertRelabel bigquery\n   schema.ts\n    TRACES_SCHEMA RELABELS_SCHEMA\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n   balance-calculator.ts\n    getOrderedActiveGrants updateGrantBalance consumeFromOrderedGrants calculateUsageAndBalance consumeCredits calculateUsageThisCycle\n   billing.knowledge.md\n   conversion.ts\n    getUserCostPerCredit\n   credit-conversion.ts\n    getUserCostPerCredit convertCreditsToUsdCents convertStripeGrantAmountToCredits\n   grant-credits.ts\n    getPreviousFreeGrantAmount calculateTotalReferralBonus grantCreditOperation processAndGrantCredit revokeGrantByOperationId\n   plans.ts\n    getPlanFromPriceId getMonthlyGrantForPlan\n  browser-actions.ts\n   BROWSER_DEFAULTS LogSchema MetricsSchema NetworkEventSchema LogFilterSchema RequiredRetryOptionsSchema OptionalBrowserConfigSchema OptionalStartConfigSchema OptionalNavigateConfigSchema OptionalClickConfigSchema OptionalTypeConfigSchema OptionalScreenshotConfigSchema MAX_MESSAGE_SIZE BrowserResponseChunkSchema ImageContentSchema BrowserResponseSchema RequiredBrowserStartActionSchema BrowserStartActionSchema RequiredBrowserNavigateActionSchema BrowserNavigateActionSchema RequiredBrowserClickActionSchema BrowserClickActionSchema RequiredBrowserTypeActionSchema BrowserTypeActionSchema RequiredBrowserScrollActionSchema OptionalScrollConfigSchema BrowserScrollActionSchema RequiredBrowserScreenshotActionSchema BrowserScreenshotActionSchema RequiredBrowserStopActionSchema BrowserStopActionSchema DiagnosticStepSchema BrowserDiagnoseActionSchema BrowserActionSchema createBrowserActionXML parseBrowserActionXML parseBrowserActionAttributes\n  constants/\n   grant-priorities.ts\n    GRANT_PRIORITIES\n   tools.ts\n    toolSchema TOOL_LIST\n  constants.ts\n   STOP_MARKER FIND_FILES_MARKER EXISTING_CODE_MARKER DEFAULT_IGNORED_FILES CODEBUFF_RATE_LIMIT_INFO CODEBUFF_CLAUDE_FALLBACK_INFO CODEBUFF_INVALID_KEY_INFO ONE_TIME_TAGS FILE_READ_STATUS HIDDEN_FILE_READ_STATUS toOptionalFile REQUEST_CREDIT_SHOW_THRESHOLD MAX_DATE BILLING_PERIOD_DAYS OVERAGE_RATE_PRO OVERAGE_RATE_MOAR_PRO CREDITS_REFERRAL_BONUS AFFILIATE_USER_REFFERAL_LIMIT getPlanDisplayName getUsageLimitFromPlanName UsageLimits PLAN_CONFIGS CREDITS_USAGE_LIMITS costModes getModelForMode claudeModels openaiModels geminiModels openrouterModels deepseekModels finetunedVertexModels models shortModelNames providerModelNames TEST_USER_ID AuthState UserState getUserState\n  db/\n   docker-compose.yml\n   drizzle.config.ts\n   env.mjs\n   index.ts\n   migrations/\n    0000_overjoyed_thing.sql\n    0001_fuzzy_typhoid_mary.sql\n    0002_sticky_dormammu.sql\n    0003_military_owl.sql\n    0004_neat_pet_avengers.sql\n    0005_minor_the_professor.sql\n    0006_first_quasimodo.sql\n    0007_equal_warlock.sql\n    0008_puzzling_carnage.sql\n    0009_bitter_rumiko_fujikawa.sql\n    0010_overjoyed_red_skull.sql\n    0011_familiar_ezekiel_stane.sql\n    0012_fluffy_naoko.sql\n    0013_famous_risque.sql\n    0014_wakeful_sinister_six.sql\n    meta/\n     0000_snapshot.json\n     0001_snapshot.json\n     0002_snapshot.json\n     0003_snapshot.json\n     0004_snapshot.json\n     0005_snapshot.json\n     0006_snapshot.json\n     0007_snapshot.json\n     0008_snapshot.json\n     0009_snapshot.json\n     0010_snapshot.json\n     0011_snapshot.json\n     0012_snapshot.json\n     0013_snapshot.json\n     0014_snapshot.json\n     _journal.json\n   schema.knowledge.md\n   schema.ts\n    ReferralStatus apiKeyTypeEnum grantTypeEnum user account creditLedger syncFailure referral fingerprint message session verificationToken encryptedApiKeys\n  env.mjs\n  project-file-tree.ts\n   DEFAULT_MAX_FILES getProjectFileTree parseGitignore getAllFilePaths flattenTree getLastReadFilePaths isFileIgnored\n  types/\n   agent-state.ts\n    ToolCallSchema ToolResultSchema AgentStateSchema getInitialAgentState\n   grant.ts\n    GrantTypeValues\n   message.ts\n    MessageSchema\n   plan.ts\n   referral.ts\n    ReferralStatusValues\n   tools.ts\n   usage.ts\n    usageDataSchema\n  util/\n   __tests__/\n    messages.test.ts\n    saxy.test.ts\n    string.test.ts\n   array.ts\n    filterDefined buildArray groupConsecutive\n   changes.ts\n    applyChanges applyAndRevertChanges\n   credentials.ts\n    userSchema genAuthCode\n   dates.ts\n    getNextQuotaReset\n   file.ts\n    FileTreeNodeSchema FileVersionSchema ProjectFileContextSchema createWriteFileBlock fileRegex fileWithNoPathRegex parseFileBlocks createMarkdownFileBlock parseMarkdownCodeBlock createSearchReplaceBlock printFileTree printFileTreeWithTokens ensureEndsWithNewline ensureDirectoryExists cleanMarkdownCodeBlock isValidFilePath\n   git.ts\n    hasStagedChanges getStagedChanges commitChanges stageAllChanges stagePatches\n   logger.ts\n    withLoggerContext logger mixin\n   lru-cache.ts\n    LRUCache get set size clear\n   messages.ts\n    limitScreenshots toContentString withCacheControl removeCache\n   min-heap.ts\n    MinHeap getParentIndex getLeftChildIndex getRightChildIndex swap siftUp siftDown insert extractMin size\n   object.ts\n    removeUndefinedProps removeNullOrUndefinedProps addObjects subtractObjects hasChanges hasSignificantDeepChanges filterObject assert\n   patch.ts\n    applyPatch\n   promise.ts\n    INITIAL_RETRY_DELAY withRetry mapAsync sleep withTimeout\n   referral.ts\n    getReferralLink\n   saxy.ts\n    parseAttrs Saxy _write _final parse _wait _unwait _handleTagOpening _parseChunk _isXMLTagStart\n   server/\n    referral.ts\n     hasMaxedReferrals\n   string.knowledge.md\n   string.ts\n    truncateString truncateStringWithMessage isWhitespace replaceNonStandardPlaceholderComments randBoolFromStr pluralize capitalize snakeToTitleCase ensureUrlProtocol safeReplace hasLazyEdit transformJsonInString generateCompactId stripNullChars\n   stripe.ts\n    stripeServer getCurrentSubscription\n   sync-failure.ts\n    logSyncFailure\n  websockets/\n   websocket-client.ts\n    formatState APIRealtimeClient state close connect waitAndReconnect receiveMessage sendMessage sendAction subscribe\n   websocket-schema.ts\n    CLIENT_MESSAGE_SCHEMAS CLIENT_MESSAGE_SCHEMA SERVER_MESSAGE_SCHEMAS SERVER_MESSAGE_SCHEMA\n tsconfig.json\nevals/\n .gitignore\n constants.ts\n  PROMPT_PREFIX\n manifold.test.ts\n package.json\n pglite-demo.test.ts\n scaffolding.ts\n  readMockFile createFileReadingMock getProjectFileContext runMainPrompt runToolCalls loopMainPrompt extractErrorFiles applyAndRevertChangesSequentially resetRepoToCommit\n swe-bench-eval.ts\n  passesSweBenchTests\n swe-bench-ids.ts\n  SWE_BENCH_IDS\n swe-bench.test.ts\n test-repos.json\n test-setup.ts\n  TEST_REPOS_DIR SWE_BENCH_REPO_PATH SWE_BENCH_PYTHON_PATH setupTestEnvironmentVariables ensureTestRepos getTestReposConfig setupSweBenchEnvironment setupTestEnvironment createInitialAgentState\n tsconfig.json\nexported-tokens.json\nhelm-docs-plan.md\nknowledge.md\nnpm-app/\n README.md\n clean-package.js\n jest.config.js\n knowledge.md\n loadEnv.js\n package.json\n src/\n  background-process-manager.ts\n   backgroundProcesses getOutputWithContext getBackgroundProcessInfoString getBackgroundProcessUpdates cleanupReportedProcesses\n  browser-runner.ts\n   BrowserRunner getLogs getNetworkEvents executeWithRetry executeAction logErrorForAnalysis getBrowser startBrowser navigate typeText scroll takeScreenshot attachPageListeners collectPerformanceMetrics collectMetrics filterLogs execute shutdown handleBrowserInstruction activeBrowserRunner\n  chat-storage.ts\n   setMessages\n  checkpoints/\n   checkpoint-manager.ts\n    CheckpointsDisabledError CheckpointManager initWorker runWorkerOperation getBareRepoPath addCheckpoint getLatestCheckpoint restoreCheckointFileState restoreUndoCheckpoint restoreRedoCheckpoint clearCheckpoints getCheckpointsAsString checkpointManager\n   file-manager.ts\n    gitCommandIsAvailable getBareRepoPath hasUnsavedChanges getLatestCommit initializeCheckpointFileManager gitAddAll gitCommit storeFileState restoreFileState\n  cli-handlers/\n   api-key.ts\n    detectApiKey handleApiKeyInput\n   checkpoint.ts\n    checkpointCommands displayCheckpointMenu isCheckpointCommand listCheckpoints handleUndo handleRedo handleRestoreCheckpoint handleClearCheckpoints saveCheckpoint\n   diff.ts\n    handleDiff\n   easter-egg.ts\n    clearScreen generateCPath quadraticBezier generateVerticalLine generateBPath getRandomColor showEasterEgg animate\n  cli.ts\n   CLI setupSignalHandlers initReadlineInterface completer setPrompt freshPrompt printInitialPrompt printDiff handleLine handleUserInput processCommand forwardUserInput returnControlToUser onWebSocketError onWebSocketReconnect handleKeyPress handleSigint handleEscKey handleStopResponse handleExit detectPasting\n  client.ts\n   Client exit initAgentState initFingerprintId getUser connect fetchStoredApiKeyTypes handleAddApiKey handleReferralCode logout login setUsage setupSubscriptions showUsageWarning generateCommitMessage sendUserInput subscribeToResponse getUsage warmContextCache\n  config.ts\n   isProduction websocketUrl websiteUrl backendUrl\n  create-template-project.ts\n   createTemplateProject\n  credentials.ts\n   userFromJson CONFIG_DIR CREDENTIALS_PATH\n  fingerprint.ts\n   calculateFingerprint\n  index.ts\n   codebuff\n  json-config/\n   constants.ts\n    StartupProcessSchema CodebuffConfigSchema\n   dev-process-manager.ts\n    startDevProcesses\n   parser.ts\n    loadCodebuffConfig\n  menu.ts\n   displayGreeting displayMenu\n  project-files.ts\n   currentChatId getProjectDataDir getCurrentChatDir setProjectRoot getProjectRoot getCurrentDirectory initProjectFileContextWithWorker getProjectFileContext getGitChanges getChangesSinceLastFileVersion getFiles getFilesOrNull getExistingFiles addScrapedContentToFiles findKnowledgeFilesInDir getFilesAbsolutePath setFiles getFileBlocks deleteFile\n  tool-handlers.ts\n   handleWriteFile handleScrapeWebPage handleRunTerminalCommand handleCodeSearch formatResult toolHandlers handleToolCall\n  types.ts\n  update-codebuff.ts\n   updateCodebuff getCodebuffNpmVersion isNpmUpToDate detectInstaller runUpdateCodebuff restartCodebuff\n  utils/\n   __tests__/\n    background-process-manager.test.ts\n    response-example-4-files.txt\n    tool-renderers.test.ts\n     processXML write\n    xml-stream-parser.test.ts\n     write\n   detect-shell.ts\n    detectShell\n   spinner.ts\n    Spinner get start stop restoreCursor log rewriteLine\n   system-info.ts\n    getSystemInfo\n   terminal.ts\n    isCommandRunning recreateShell resetShell formatResult runBackgroundCommand runTerminalCommand runCommandPty\n   tool-renderers.ts\n    defaultToolCallRenderer toolRenderers\n   xml-stream-parser.ts\n    createXMLStreamParser\n  web-scraper.ts\n   scrapeWebPage parseUrlsFromContent getScrapedContentBlocks\n  workers/\n   checkpoint-worker.ts\n   project-context.ts\n tsconfig.json\n twitch-plays-codebuff.sh\npackage.json\npackages/\n code-map/\n  languages.ts\n   getLanguageConfig\n  package.json\n  parse.ts\n   DEBUG_PARSING getFileTokenScores parseTokens parseFile\n  test-langs/\n   test.c\n    Greeter create_greeter greet free_greeter print_greeting main\n   test.cpp\n    greet Greeting printGreeting main\n   test.cs\n    IGreeter Greet Greeting PrintGreeting Main\n   test.go\n    Greeter string Greeting Greet PrintGreeting main\n   test.java\n    Greeter greet Greeting printGreeting main\n   test.js\n    greet Greeting printGreeting createGreeter\n   test.php\n    greet Greeting __construct printGreeting createGreeter\n   test.py\n    Greeter greet Greeting print_greeting\n   test.rb\n    Greeter greet prefix Greeting initialize print_greeting\n   test.rs\n    Greeter Greeting new greet main\n   test.ts\n    Greeting greet printGreeting createGreeter\n  tree-sitter-queries/\n   readme.md\n   tree-sitter-c-tags.scm\n   tree-sitter-c_sharp-tags.scm\n   tree-sitter-cpp-tags.scm\n   tree-sitter-go-tags.scm\n   tree-sitter-java-tags.scm\n   tree-sitter-javascript-tags.scm\n   tree-sitter-php-tags.scm\n   tree-sitter-python-tags.scm\n   tree-sitter-ruby-tags.scm\n   tree-sitter-rust-tags.scm\n   tree-sitter-typescript-tags.scm\n  tsconfig.json\npython-app/\n .gitignore\n LICENSE\n README.md\n knowledge.md\n pyproject.toml\n src/\n  codebuff/\n   __init__.py\n    main\nscripts/\n .gitignore\n analyze-edit-blocks.ts\n  analyzeEditBlocks\n analyze-model-usage.ts\n  analyzeModelUsage\n analyze-overages.ts\n  getSubscriptionItemByType getPlanFromPriceId analyzeOverages\n apply-credit-migration.ts\n  applyCreditMigration\n bump-version.ts\n  incrementVersion\n calculate-average-spend.ts\n  calculateAverageSpend\n calculate-dau.ts\n  calculateDAU\n calculate-mrr.ts\n  calculateMRR\n calculate-weekly-usage.ts\n  calculateWeeklyUsage\n count-edit-file.ts\n  countOccurrences parseResponse main\n debug-log-subset.ts\n  copyLastLogLines\n export-user-emails.ts\n  exportUserEmails\n package.json\n patch-dataset-processing/\n  concat-datasets.ts\n  create-training-dataset.ts\n   createTrainingDataset\n  generate-fine-tuning-dataset.ts\n   saveProgress loadProgress generateClaudeSketch createDataset main\n  process-raw-dataset.ts\n   processDataset\n  update-patch.ts\n   updatePatch processDatasetPatches\n  update-sketch.ts\n   updateSketch processDatasetSketches\n  verify-patches.ts\n   verifyPatches\n tsconfig.json\n update-stripe-subscriptions.ts\n  processCustomer\nstack.env\nstart-dev.sh\nstripe-reconciliation-plan.md\ntest/\n __mock-data__/\n  actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS SERVER_ACTIONS\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  app/\n   expected.ts\n    cacheController app\n   new.ts\n   old.ts\n    cacheController app\n  css/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment/\n   expected.ts\n    deleteComment\n   new.ts\n    deleteComment\n   old.ts\n    deleteComment\n  delete-comment2/\n   expected.ts\n    deleteComment\n   old.ts\n    deleteComment\n   patch.ts\n  duplicate-imports/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets getTools executeToolCall\n   old.ts\n    getTools\n  existing-comments/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  function-edit-only/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets\n   old.ts\n    searchManifoldMarkets getTools executeToolCall\n  graph/\n   expected.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   new.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   old.ts\n    loadGraphData createD3Graph ticked highlightNodes setSelectedNode resetGraph zoomToNode resetZoom drag dragstarted dragged dragended\n   patch.ts\n    zoomToNode\n  hallucinated/\n   expected.ts\n    processChunk streamResponse mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n   new.ts\n    processChunk streamResponse\n   old.ts\n    mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n  inbox-screen/\n   expected.tsx\n    InboxScreen\n   new.tsx\n    InboxScreen\n   old.tsx\n    InboxScreen\n   patch\n  indentation/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  index/\n   expected.ts\n    manicode\n   new.ts\n    manicode\n   old.ts\n    manicode\n  knowledge-files/\n   cache-expiration.ts\n    mockFileContext messages expectedFiles\n   crawlee.ts\n    mockFileContext messages expectedFiles\n   delete-comment.ts\n    mockFileContext messages expectedFiles\n  many-updates/\n   expected.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   new.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   old.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse handleReadFiles handleScrapeWebPage\n  missing-line-actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  patch/\n   expected.ts\n    Client connect checkNpmVersion sendUserInput subscribeToResponse warmContextCache setupSubscriptions\n   old.ts\n    Client connect setupSubscriptions checkNpmVersion sendUserInput subscribeToResponse warmContextCache\n   patch.ts\n  process-stream/\n   expected.ts\n    parseAttributes\n   new.ts\n   old.ts\n    parseAttributes\n  remaining-changes/\n   expected.ts\n    processData\n   old.ts\n    processData\n   search-replace.ts\n    processData\n  schema/\n   expected.ts\n    DEFAULT_CACHE_STRATEGY API\n   new.ts\n   old.ts\n    DEFAULT_CACHE_STRATEGY API\n  simple/\n   expected.ts\n   new.ts\n   old.ts\n  system-prompt/\n   expected.ts\n    getSystemPrompt\n   new.ts\n   old.ts\n    getSystemPrompt\n  whitespace/\n   expected.ts\n    processData\n   new.ts\n    processData\n   old.ts\n    processData\n __src__/\n  browser-debugging.test.ts\n  checkpoint-file-manager.test.ts\n  checkpoints.test.ts\n   createMockAgentState on postMessage off\n  env.mjs\n  parse-diff-blocks.test.ts\n  patch.test.ts\n  process-xml-chunks.test.ts\n  quota-manager.test.ts\n  score-tests.ts\n   projectTest\n  setup.ts\n  terminal.test.ts\n  test.knowledge.md\n bunfig.toml\n package.json\n tsconfig.json\ntsconfig.base.json\nweb/\n .eslintignore\n .eslintrc.js\n .github/\n  issue-template.md\n  workflows/\n   i18n.yml\n   lint.yml\n   playwright.yml\n .gitignore\n .prettierignore\n .prettierrc.js\n README.md\n commitlint.config.js\n components.json\n contentlayer.config.ts\n  Doc\n jest.config.js\n jest.setup.js\n knowledge.md\n next.config.mjs\n package.json\n playwright.config.ts\n postcss.config.cjs\n public/\n  codebuff-intro1.webm\n scripts/\n  discord/\n   index.ts\n    main\n   register-commands.ts\n    main\n src/\n  __tests__/\n   e2e/\n    home.spec.ts\n   unit/\n    home.spec.tsx\n  actions/\n   hello-action.ts\n    helloAction\n  app/\n   [sponsee]/\n    page.tsx\n     generateMetadata SponseePage\n   affiliates/\n    actions.ts\n     setAffiliateHandleAction\n    page.tsx\n     SubmitButton SetHandleForm AffiliatesPage\n   analytics.knowledge.md\n   api/\n    api-keys/\n     route.ts\n      GET POST\n    auth/\n     [...nextauth]/\n      auth-options.ts\n       createAndLinkStripeCustomer createInitialCreditGrant sendSignupEventToLoops authOptions session redirect\n      route.ts\n     cli/\n      code/\n       route.ts\n        POST\n      logout/\n       route.ts\n        POST\n      status/\n       route.ts\n        GET\n    feed/\n     route.ts\n      GET\n    healthz/\n     route.ts\n      GET\n    referrals/\n     [code]/\n      route.ts\n       GET\n     helpers.ts\n      processAndGrantReferralCredit redeemReferralCode\n     route.ts\n      GET POST\n    stripe/\n     buy-credits/\n      route.ts\n       POST\n     webhook/\n      route.ts\n       handleCustomerCreated handleCheckoutSessionCompleted handleSubscriptionEvent handleInvoiceCreated handleInvoicePaid\n    user/\n     auto-topup/\n      route.ts\n       POST\n     profile/\n      route.ts\n       GET\n     usage/\n      route.ts\n       GET\n   docs/\n    [category]/\n     layout.tsx\n      generateMetadata CategoryLayout\n     metadata.ts\n      generateMetadata\n     page.tsx\n      CategoryPage\n    layout.tsx\n     DocsLayout\n    page.tsx\n     DocsPage\n   hackathon-april-2025/\n    page.tsx\n   layout.tsx\n    generateMetadata\n   login/\n    page.tsx\n     LoginContent\n   onboard/\n    page.tsx\n   page.tsx\n    SearchParamsHandler Home\n   payment-change/\n    page.tsx\n     PaymentChangeContent\n   payment-success/\n    page.tsx\n     SearchParamsHandler PaymentSuccessContent PaymentSuccessPage\n   pricing/\n    page.tsx\n     CreditVisual PricingCard TeamPlanIllustration PricingPage\n   privacy-policy/\n    page.tsx\n   referrals/\n    [code]/\n     metadata.ts\n      generateMetadata\n     page.tsx\n      RedeemPage\n    layout.tsx\n    page.tsx\n   robots.ts\n    robots\n   sitemap.ts\n    sitemap\n   terms-of-service/\n    page.tsx\n   usage/\n    layout.tsx\n    page.tsx\n    usage-display.tsx\n     UsageDisplay UsageDisplaySkeleton\n  components/\n   BrowserPreview.tsx\n   CookieConsentCard.tsx\n    CookieConsentCard\n   IDEDemo.tsx\n    IDEDemo\n   TerminalDemo.tsx\n   auto-topup/\n    AutoTopupSettings.tsx\n     AutoTopupSettings\n    AutoTopupSettingsForm.tsx\n     AutoTopupSettingsForm\n    AutoTopupSwitch.tsx\n     AutoTopupSwitch\n    constants.ts\n     AUTO_TOPUP_CONSTANTS\n    types.ts\n   card-with-beams.tsx\n   credits/\n    CreditPurchaseSection.tsx\n     CREDIT_OPTIONS CENTS_PER_CREDIT CreditPurchaseSection\n   docs/\n    copy-heading.tsx\n     CopyHeading\n    doc-sidebar.tsx\n     sections DocSidebar fetchNews\n    docs.knowledge.md\n    mdx/\n     code-demo.tsx\n      CodeDemo\n     custom-link.tsx\n      CustomLink\n     markdown-table.tsx\n      MarkdownTable\n     mdx-components.tsx\n      Mdx\n    toc.tsx\n     TableOfContents\n   footer.tsx\n    Footer\n   icons.tsx\n    Icons\n   layout-wrapper.tsx\n    LayoutWrapper\n   navbar/\n    navbar.tsx\n     Navbar\n    user-dropdown.tsx\n     UserDropdown\n   providers/\n    query-client-provider.tsx\n     QueryProvider\n   sign-in/\n    sign-in-button.tsx\n     SignInButton\n    sign-in-card-footer.tsx\n     SignInCardFooter\n   theme-provider.tsx\n    ThemeProvider\n   theme-switcher.tsx\n    ThemeSwitcher\n   ui/\n    background-beams.tsx\n     BackgroundBeams\n    banner.tsx\n     BannerContent Banner\n    button.tsx\n    card.tsx\n    collapsible.tsx\n    credit-confetti.tsx\n     CreditConfetti\n    decorative-blocks.tsx\n     DecorativeBlocks adjustColorBrightness\n    dialog.tsx\n    dropdown-menu.tsx\n    enhanced-copy-button.tsx\n     EnhancedCopyButton TerminalCopyButton\n    footer.tsx\n     Footer\n    hero-buttons.tsx\n     HeroButtons\n    hero.tsx\n     TypingEffect Hero\n    input.tsx\n    install-dialog.tsx\n     InstallDialog\n    label.tsx\n    landing/\n     animated-element.tsx\n      AnimatedElement\n     competition/\n      claude-code.tsx\n       ClaudeCodeVisualization\n      cline.tsx\n       ClineVisualization\n      cursor.tsx\n       CursorMazeVisualization\n      github-copilot.tsx\n       MeltingText MatrixRainEffect GithubCopilotVisualization\n      index.tsx\n       CompetitionSection\n      tabs.tsx\n       competitors CompetitorCard CompetitionTabs\n     constants.ts\n      DEMO_CODE SECTION_THEMES ANIMATION FEATURE_POINTS\n     cta-section.tsx\n      BenefitCard CTASection\n     demo-code-display.tsx\n      DemoCodeDisplay\n     feature/\n      browser-comparison.tsx\n       BrowserComparison\n      chart-illustration.tsx\n       ChartIllustration\n      code-illustration.tsx\n       CodeIllustration\n      highlight-text.tsx\n       HighlightText\n      index.tsx\n       LearnMoreLink AnimatedContent FeatureSection\n      workflow-illustration.tsx\n       WorkflowIllustration\n     testimonials-section.tsx\n      TestimonialsSection\n     types.ts\n    neon-gradient-button.tsx\n     NeonGradientButton\n    radio-group.tsx\n    section.tsx\n     Section\n    separator.tsx\n    sheet.tsx\n    sidebar.tsx\n     useSidebar\n    skeleton-loading.tsx\n     PricingCardSkeleton AutoTopupCardSkeleton\n    skeleton.tsx\n     Skeleton\n    slider.tsx\n    switch.tsx\n    tabs.tsx\n    terminal/\n     index.tsx\n     style.css\n     terminal-input.tsx\n     terminal-output.tsx\n    toast.tsx\n    toaster.tsx\n     Toaster\n    tooltip.tsx\n    use-toast.ts\n     genId reducer dispatch toast useToast\n  content/\n   advanced/\n    claude-code-comparison.mdx\n    how-does-it-work.mdx\n    large-projects.mdx\n    troubleshooting.mdx\n    what-models.mdx\n   case-studies/\n    _cta.mdx\n    benjamin-bryant.mdx\n    oliver-lukesch.mdx\n   help/\n    faq.mdx\n    getting-started.mdx\n    helm.mdx\n   showcase/\n    coming-soon.mdx\n   tips/\n    best-practices.mdx\n    keyboard-shortcuts.mdx\n    knowledge-files.mdx\n    other-use-cases.mdx\n    version-control.mdx\n    where-codebuff-shines.mdx\n  discord/\n   client.ts\n    startDiscordBot\n   rate-limiter.ts\n    isRateLimited\n  env.mjs\n  hooks/\n   use-auto-topup.ts\n    useAutoTopup\n   use-install-dialog.ts\n    useInstallDialog\n   use-mobile.tsx\n    useIsMobile\n   use-user-plan.ts\n    useUserPlan\n  lib/\n   PostHogProvider.tsx\n    usePostHog PostHogProvider\n   SessionProvider.tsx\n   constant.ts\n    siteConfig\n   docs.ts\n    getDocsByCategory getNewsArticles\n   fonts.ts\n    fonts\n   remark-code-to-codedemo.ts\n    remarkCodeToCodeDemo\n   stripe-utils.ts\n    getStripeCustomerId getSubscriptionItemByType getPlanFromPriceId getPlanPriceIds validatePlanChange checkForUnpaidInvoices getTotalReferralCreditsForCustomer\n   testimonials.ts\n    testimonials\n   trackConversions.ts\n    LINKED_IN_CAMPAIGN_ID storeSearchParams trackUpgrade\n   utils.ts\n    cn changeOrUpgrade clamp\n  styles/\n   globals.css\n  types/\n   docs.ts\n   user.ts\n  util/\n   logger.ts\n    logger\n tailwind.config.ts\n tsconfig.json\n\n</project_file_tree>",
        "160000": "# Project file tree\n\nAs Buffy, you have access to all the files in the project.\n\nThe following is the path to the project on the user's computer. It is also the current working directory for terminal commands:\n<project_path>\n/Users/vrkumar/src/venkr/codebuff\n</project_path>\n\nWithin this project directory, here is the file tree. \nNote that the file tree:\n- Is cached from the start of this conversation. Files created after the start of this conversation will not appear.\n- Excludes files that are .gitignored.\n\n<project_file_tree>\n.env.example\n.eslintrc.json\n.github/\n CODEOWNERS\n workflows/\n  ci.yml\n.gitignore\n.manicodeignore\n.prettierrc\n.vscode/\n settings.json\nREADME.md\nauthentication.knowledge.md\nbackend/\n .gitignore\n README.md\n jest.config.js\n jest.setup.js\n knowledge.md\n package.json\n src/\n  __tests__/\n   auto-topup.test.ts\n   check-new-files-necessary.test.ts\n   credit-conversion.test.ts\n   fast-rewrite.test.ts\n    connect\n   generate-diffs-prompt.test.ts\n   main-prompt.integration.test.ts\n    MockWebSocket send close on removeListener\n   main-prompt.test.ts\n    start MockWebSocket send close on removeListener\n   parse-attributes.test.ts\n   process-file-block.test.ts\n    connect\n   process-stream.test.ts\n   test-data/\n    dex-go/\n     edit-snippet.go\n      TaskRunToolCallReconciler initializeTRTC Context TaskRunToolCall bool error SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan string Span processBuiltinFunction Tool Result float64\n     expected.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan Span checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n     original.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC Time checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n   usage-calculation.test.ts\n  api/\n   usage.ts\n    getUserIdFromAuthToken usageHandler\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n  check-terminal-command.ts\n   checkTerminalCommand\n  env.mjs\n  fast-rewrite.ts\n   fastRewrite rewriteWithOpenAI preserveCommentsInEditSnippet shouldAddFilePlaceholders\n  find-files/\n   check-new-files-necessary.ts\n    checkNewFilesNecessary\n   request-files-prompt.ts\n    requestRelevantFiles getRelevantFiles topLevelDirectories getExampleFileList generateNonObviousRequestFilesPrompt generateKeyRequestFilesPrompt secondPassFindAdditionalFiles generateAdditionalFilesPrompt\n  generate-diffs-prompt.ts\n   parseAndGetDiffBlocksSingleFile retryDiffBlocksPrompt\n  get-documentation-for-query.ts\n   getDocumentationForQuery\n  index.ts\n  llm-apis/\n   claude.ts\n    transformMessages promptClaude promptClaudeWithContinuation\n   context7-api.ts\n    listLibraries context7LibrariesPromise fetchContext7LibraryDocumentation\n   deepseek-api.ts\n    transformMessages promptDeepseekStream start promptDeepseek\n   gemini-api.ts\n    transformMessagesToGoogle promptGeminiStream start cancel promptGemini\n   gemini-vertex-api.ts\n    transformToPart transformMessages transformSystem promptGemini\n   gemini-with-fallbacks.ts\n    promptGeminiWithFallbacks\n   message-cost-tracker.ts\n    syncMessageToStripe logSyncFailure insertMessageRecord sendCostResponseToClient updateUserCycleUsage saveMessage\n   open-router.ts\n    promptOpenRouter\n   openai-api.ts\n    getOpenAI transformMessages promptOpenAI promptOpenAIWithContinuation\n   relace-api.ts\n    sendToRelaceLongContext promptRelaceAI rerank\n   vercel-ai-sdk/\n    ai-sdk.ts\n     promptAiSdkStream promptAiSdk transformMessages promptAiSdk_GeminiFormat\n    vertex-finetuned.ts\n     patchedFetchForFinetune patchString vertexFinetuned\n  main-prompt.ts\n   mainPrompt getRelevantFileInfoMessage getFileReadingUpdates getPrintedPaths\n  process-file-block.ts\n   processFileBlock handleLargeFile\n  process-stream.ts\n   parseAttributes\n  prompt-agent-stream.ts\n   getAgentStream\n  system-prompt/\n   agent-instructions.md\n   agent-system-prompt.ts\n    getAgentSystemPrompt\n   prompts.ts\n    knowledgeFilesPrompt getProjectFileTreePrompt getSystemInfoPrompt getGitChangesPrompt gitCommitGuidePrompt\n   save-agent-request.ts\n    saveAgentRequest\n   search-system-prompt.ts\n    getSearchSystemPrompt\n   truncate-file-tree.ts\n    truncateFileTreeBasedOnTokenBudget pruneFileTokenScores\n  tools.ts\n   parseRawToolCall TOOL_LIST TOOLS_WHICH_END_THE_RESPONSE toolsInstructions updateContext updateContextFromToolCalls readFiles writeFile checkTaskFile runTerminalCommand parseToolCalls appendToLog listDirectory summarizeOutput renderSubgoalUpdate transformRunTerminalCommand\n  util/\n   __tests__/\n    messages.test.ts\n    object.test.ts\n    parse-tool-call-xml.test.ts\n    simplify-tool-results.test.ts\n    split-data.test.ts\n   check-auth.ts\n    checkAuth\n   debug.ts\n    DEBUG_MODE debugLog clearDebugLog\n   logger.ts\n    withLoggerContext pinoLogger mixin splitAndLog logger\n   messages.ts\n    messagesWithSystem getMessageText simplifyTerminalHelper trimMessagesToFitTokenLimit getMessagesSubset\n   object.ts\n    stripNullCharsFromObject\n   parse-tool-call-xml.ts\n    parseToolCallXml renderToolResults parseToolResults renderReadFilesResult parseReadFilesResult isToolResult\n   simplify-tool-results.ts\n    simplifyToolResults simplifyReadFileResults simplifyTerminalCommandResults simplifyReadFileToolResult simplifyTerminalCommandToolResult\n   split-data.ts\n    isPlainObject getJsonSize splitString splitObject splitArray splitDataWithLengths splitData\n   token-counter.ts\n    countTokens countTokensJson countTokensForFiles\n  websockets/\n   auth.ts\n    getUserIdFromAuthToken getUserInfoFromAuthToken\n   middleware.ts\n    WebSocketMiddleware use execute run protec\n   server.ts\n    SWITCHBOARD MessageParseError serializeError processMessage listen sendMessage\n   switchboard.ts\n    Switchboard getClient getAll getSubscribers connect disconnect markSeen subscribe unsubscribe\n   websocket-action.ts\n    sendAction getUserIdFromAuthToken genUsageResponse subscribeToAction onWebsocketAction requestFiles requestFile requestOptionalFile\n tsconfig.json\nbigquery-implementation-plan.md\nbun.lock\ncodebuff.json\ncommon/\n knowledge.md\n package.json\n src/\n  actions.ts\n   FileChangeSchema CHANGES ToolCallSchema CLIENT_ACTION_SCHEMA UsageReponseSchema InitResponseSchema ResponseCompleteSchema MessageCostResponseSchema PromptResponseSchema SERVER_ACTION_SCHEMA\n  api-keys/\n   constants.ts\n    ALGORITHM IV_LENGTH AUTH_TAG_LENGTH API_KEY_TYPES KEY_PREFIXES KEY_LENGTHS READABLE_NAME\n   crypto.ts\n    encryptApiKeyInternal decryptApiKeyInternal encryptAndStoreApiKey retrieveAndDecryptApiKey clearApiKey\n  bigquery/\n   client.ts\n    BigQueryClient initialize insertTrace insertRelabel bigquery\n   schema.ts\n    TRACES_SCHEMA RELABELS_SCHEMA\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n   balance-calculator.ts\n    getOrderedActiveGrants updateGrantBalance consumeFromOrderedGrants calculateUsageAndBalance consumeCredits calculateUsageThisCycle\n   billing.knowledge.md\n   conversion.ts\n    getUserCostPerCredit\n   credit-conversion.ts\n    getUserCostPerCredit convertCreditsToUsdCents convertStripeGrantAmountToCredits\n   grant-credits.ts\n    getPreviousFreeGrantAmount calculateTotalReferralBonus grantCreditOperation processAndGrantCredit revokeGrantByOperationId\n   plans.ts\n    getPlanFromPriceId getMonthlyGrantForPlan\n  browser-actions.ts\n   BROWSER_DEFAULTS LogSchema MetricsSchema NetworkEventSchema LogFilterSchema RequiredRetryOptionsSchema OptionalBrowserConfigSchema OptionalStartConfigSchema OptionalNavigateConfigSchema OptionalClickConfigSchema OptionalTypeConfigSchema OptionalScreenshotConfigSchema MAX_MESSAGE_SIZE BrowserResponseChunkSchema ImageContentSchema BrowserResponseSchema RequiredBrowserStartActionSchema BrowserStartActionSchema RequiredBrowserNavigateActionSchema BrowserNavigateActionSchema RequiredBrowserClickActionSchema BrowserClickActionSchema RequiredBrowserTypeActionSchema BrowserTypeActionSchema RequiredBrowserScrollActionSchema OptionalScrollConfigSchema BrowserScrollActionSchema RequiredBrowserScreenshotActionSchema BrowserScreenshotActionSchema RequiredBrowserStopActionSchema BrowserStopActionSchema DiagnosticStepSchema BrowserDiagnoseActionSchema BrowserActionSchema createBrowserActionXML parseBrowserActionXML parseBrowserActionAttributes\n  constants/\n   grant-priorities.ts\n    GRANT_PRIORITIES\n   tools.ts\n    toolSchema TOOL_LIST\n  constants.ts\n   STOP_MARKER FIND_FILES_MARKER EXISTING_CODE_MARKER DEFAULT_IGNORED_FILES CODEBUFF_RATE_LIMIT_INFO CODEBUFF_CLAUDE_FALLBACK_INFO CODEBUFF_INVALID_KEY_INFO ONE_TIME_TAGS FILE_READ_STATUS HIDDEN_FILE_READ_STATUS toOptionalFile REQUEST_CREDIT_SHOW_THRESHOLD MAX_DATE BILLING_PERIOD_DAYS OVERAGE_RATE_PRO OVERAGE_RATE_MOAR_PRO CREDITS_REFERRAL_BONUS AFFILIATE_USER_REFFERAL_LIMIT getPlanDisplayName getUsageLimitFromPlanName UsageLimits PLAN_CONFIGS CREDITS_USAGE_LIMITS costModes getModelForMode claudeModels openaiModels geminiModels openrouterModels deepseekModels finetunedVertexModels models shortModelNames providerModelNames TEST_USER_ID AuthState UserState getUserState\n  db/\n   docker-compose.yml\n   drizzle.config.ts\n   env.mjs\n   index.ts\n   migrations/\n    0000_overjoyed_thing.sql\n    0001_fuzzy_typhoid_mary.sql\n    0002_sticky_dormammu.sql\n    0003_military_owl.sql\n    0004_neat_pet_avengers.sql\n    0005_minor_the_professor.sql\n    0006_first_quasimodo.sql\n    0007_equal_warlock.sql\n    0008_puzzling_carnage.sql\n    0009_bitter_rumiko_fujikawa.sql\n    0010_overjoyed_red_skull.sql\n    0011_familiar_ezekiel_stane.sql\n    0012_fluffy_naoko.sql\n    0013_famous_risque.sql\n    0014_wakeful_sinister_six.sql\n    meta/\n     0000_snapshot.json\n     0001_snapshot.json\n     0002_snapshot.json\n     0003_snapshot.json\n     0004_snapshot.json\n     0005_snapshot.json\n     0006_snapshot.json\n     0007_snapshot.json\n     0008_snapshot.json\n     0009_snapshot.json\n     0010_snapshot.json\n     0011_snapshot.json\n     0012_snapshot.json\n     0013_snapshot.json\n     0014_snapshot.json\n     _journal.json\n   schema.knowledge.md\n   schema.ts\n    ReferralStatus apiKeyTypeEnum grantTypeEnum user account creditLedger syncFailure referral fingerprint message session verificationToken encryptedApiKeys\n  env.mjs\n  project-file-tree.ts\n   DEFAULT_MAX_FILES getProjectFileTree parseGitignore getAllFilePaths flattenTree getLastReadFilePaths isFileIgnored\n  types/\n   agent-state.ts\n    ToolCallSchema ToolResultSchema AgentStateSchema getInitialAgentState\n   grant.ts\n    GrantTypeValues\n   message.ts\n    MessageSchema\n   plan.ts\n   referral.ts\n    ReferralStatusValues\n   tools.ts\n   usage.ts\n    usageDataSchema\n  util/\n   __tests__/\n    messages.test.ts\n    saxy.test.ts\n    string.test.ts\n   array.ts\n    filterDefined buildArray groupConsecutive\n   changes.ts\n    applyChanges applyAndRevertChanges\n   credentials.ts\n    userSchema genAuthCode\n   dates.ts\n    getNextQuotaReset\n   file.ts\n    FileTreeNodeSchema FileVersionSchema ProjectFileContextSchema createWriteFileBlock fileRegex fileWithNoPathRegex parseFileBlocks createMarkdownFileBlock parseMarkdownCodeBlock createSearchReplaceBlock printFileTree printFileTreeWithTokens ensureEndsWithNewline ensureDirectoryExists cleanMarkdownCodeBlock isValidFilePath\n   git.ts\n    hasStagedChanges getStagedChanges commitChanges stageAllChanges stagePatches\n   logger.ts\n    withLoggerContext logger mixin\n   lru-cache.ts\n    LRUCache get set size clear\n   messages.ts\n    limitScreenshots toContentString withCacheControl removeCache\n   min-heap.ts\n    MinHeap getParentIndex getLeftChildIndex getRightChildIndex swap siftUp siftDown insert extractMin size\n   object.ts\n    removeUndefinedProps removeNullOrUndefinedProps addObjects subtractObjects hasChanges hasSignificantDeepChanges filterObject assert\n   patch.ts\n    applyPatch\n   promise.ts\n    INITIAL_RETRY_DELAY withRetry mapAsync sleep withTimeout\n   referral.ts\n    getReferralLink\n   saxy.ts\n    parseAttrs Saxy _write _final parse _wait _unwait _handleTagOpening _parseChunk _isXMLTagStart\n   server/\n    referral.ts\n     hasMaxedReferrals\n   string.knowledge.md\n   string.ts\n    truncateString truncateStringWithMessage isWhitespace replaceNonStandardPlaceholderComments randBoolFromStr pluralize capitalize snakeToTitleCase ensureUrlProtocol safeReplace hasLazyEdit transformJsonInString generateCompactId stripNullChars\n   stripe.ts\n    stripeServer getCurrentSubscription\n   sync-failure.ts\n    logSyncFailure\n  websockets/\n   websocket-client.ts\n    formatState APIRealtimeClient state close connect waitAndReconnect receiveMessage sendMessage sendAction subscribe\n   websocket-schema.ts\n    CLIENT_MESSAGE_SCHEMAS CLIENT_MESSAGE_SCHEMA SERVER_MESSAGE_SCHEMAS SERVER_MESSAGE_SCHEMA\n tsconfig.json\nevals/\n .gitignore\n constants.ts\n  PROMPT_PREFIX\n manifold.test.ts\n package.json\n pglite-demo.test.ts\n scaffolding.ts\n  readMockFile createFileReadingMock getProjectFileContext runMainPrompt runToolCalls loopMainPrompt extractErrorFiles applyAndRevertChangesSequentially resetRepoToCommit\n swe-bench-eval.ts\n  passesSweBenchTests\n swe-bench-ids.ts\n  SWE_BENCH_IDS\n swe-bench.test.ts\n test-repos.json\n test-setup.ts\n  TEST_REPOS_DIR SWE_BENCH_REPO_PATH SWE_BENCH_PYTHON_PATH setupTestEnvironmentVariables ensureTestRepos getTestReposConfig setupSweBenchEnvironment setupTestEnvironment createInitialAgentState\n tsconfig.json\nexported-tokens.json\nhelm-docs-plan.md\nknowledge.md\nnpm-app/\n README.md\n clean-package.js\n jest.config.js\n knowledge.md\n loadEnv.js\n package.json\n src/\n  background-process-manager.ts\n   backgroundProcesses getOutputWithContext getBackgroundProcessInfoString getBackgroundProcessUpdates cleanupReportedProcesses\n  browser-runner.ts\n   BrowserRunner getLogs getNetworkEvents executeWithRetry executeAction logErrorForAnalysis getBrowser startBrowser navigate typeText scroll takeScreenshot attachPageListeners collectPerformanceMetrics collectMetrics filterLogs execute shutdown handleBrowserInstruction activeBrowserRunner\n  chat-storage.ts\n   setMessages\n  checkpoints/\n   checkpoint-manager.ts\n    CheckpointsDisabledError CheckpointManager initWorker runWorkerOperation getBareRepoPath addCheckpoint getLatestCheckpoint restoreCheckointFileState restoreUndoCheckpoint restoreRedoCheckpoint clearCheckpoints getCheckpointsAsString checkpointManager\n   file-manager.ts\n    gitCommandIsAvailable getBareRepoPath hasUnsavedChanges getLatestCommit initializeCheckpointFileManager gitAddAll gitCommit storeFileState restoreFileState\n  cli-handlers/\n   api-key.ts\n    detectApiKey handleApiKeyInput\n   checkpoint.ts\n    checkpointCommands displayCheckpointMenu isCheckpointCommand listCheckpoints handleUndo handleRedo handleRestoreCheckpoint handleClearCheckpoints saveCheckpoint\n   diff.ts\n    handleDiff\n   easter-egg.ts\n    clearScreen generateCPath quadraticBezier generateVerticalLine generateBPath getRandomColor showEasterEgg animate\n  cli.ts\n   CLI setupSignalHandlers initReadlineInterface completer setPrompt freshPrompt printInitialPrompt printDiff handleLine handleUserInput processCommand forwardUserInput returnControlToUser onWebSocketError onWebSocketReconnect handleKeyPress handleSigint handleEscKey handleStopResponse handleExit detectPasting\n  client.ts\n   Client exit initAgentState initFingerprintId getUser connect fetchStoredApiKeyTypes handleAddApiKey handleReferralCode logout login setUsage setupSubscriptions showUsageWarning generateCommitMessage sendUserInput subscribeToResponse getUsage warmContextCache\n  config.ts\n   isProduction websocketUrl websiteUrl backendUrl\n  create-template-project.ts\n   createTemplateProject\n  credentials.ts\n   userFromJson CONFIG_DIR CREDENTIALS_PATH\n  fingerprint.ts\n   calculateFingerprint\n  index.ts\n   codebuff\n  json-config/\n   constants.ts\n    StartupProcessSchema CodebuffConfigSchema\n   dev-process-manager.ts\n    startDevProcesses\n   parser.ts\n    loadCodebuffConfig\n  menu.ts\n   displayGreeting displayMenu\n  project-files.ts\n   currentChatId getProjectDataDir getCurrentChatDir setProjectRoot getProjectRoot getCurrentDirectory initProjectFileContextWithWorker getProjectFileContext getGitChanges getChangesSinceLastFileVersion getFiles getFilesOrNull getExistingFiles addScrapedContentToFiles findKnowledgeFilesInDir getFilesAbsolutePath setFiles getFileBlocks deleteFile\n  tool-handlers.ts\n   handleWriteFile handleScrapeWebPage handleRunTerminalCommand handleCodeSearch formatResult toolHandlers handleToolCall\n  types.ts\n  update-codebuff.ts\n   updateCodebuff getCodebuffNpmVersion isNpmUpToDate detectInstaller runUpdateCodebuff restartCodebuff\n  utils/\n   __tests__/\n    background-process-manager.test.ts\n    response-example-4-files.txt\n    tool-renderers.test.ts\n     processXML write\n    xml-stream-parser.test.ts\n     write\n   detect-shell.ts\n    detectShell\n   spinner.ts\n    Spinner get start stop restoreCursor log rewriteLine\n   system-info.ts\n    getSystemInfo\n   terminal.ts\n    isCommandRunning recreateShell resetShell formatResult runBackgroundCommand runTerminalCommand runCommandPty\n   tool-renderers.ts\n    defaultToolCallRenderer toolRenderers\n   xml-stream-parser.ts\n    createXMLStreamParser\n  web-scraper.ts\n   scrapeWebPage parseUrlsFromContent getScrapedContentBlocks\n  workers/\n   checkpoint-worker.ts\n   project-context.ts\n tsconfig.json\n twitch-plays-codebuff.sh\npackage.json\npackages/\n code-map/\n  languages.ts\n   getLanguageConfig\n  package.json\n  parse.ts\n   DEBUG_PARSING getFileTokenScores parseTokens parseFile\n  test-langs/\n   test.c\n    Greeter create_greeter greet free_greeter print_greeting main\n   test.cpp\n    greet Greeting printGreeting main\n   test.cs\n    IGreeter Greet Greeting PrintGreeting Main\n   test.go\n    Greeter string Greeting Greet PrintGreeting main\n   test.java\n    Greeter greet Greeting printGreeting main\n   test.js\n    greet Greeting printGreeting createGreeter\n   test.php\n    greet Greeting __construct printGreeting createGreeter\n   test.py\n    Greeter greet Greeting print_greeting\n   test.rb\n    Greeter greet prefix Greeting initialize print_greeting\n   test.rs\n    Greeter Greeting new greet main\n   test.ts\n    Greeting greet printGreeting createGreeter\n  tree-sitter-queries/\n   readme.md\n   tree-sitter-c-tags.scm\n   tree-sitter-c_sharp-tags.scm\n   tree-sitter-cpp-tags.scm\n   tree-sitter-go-tags.scm\n   tree-sitter-java-tags.scm\n   tree-sitter-javascript-tags.scm\n   tree-sitter-php-tags.scm\n   tree-sitter-python-tags.scm\n   tree-sitter-ruby-tags.scm\n   tree-sitter-rust-tags.scm\n   tree-sitter-typescript-tags.scm\n  tsconfig.json\npython-app/\n .gitignore\n LICENSE\n README.md\n knowledge.md\n pyproject.toml\n src/\n  codebuff/\n   __init__.py\n    main\nscripts/\n .gitignore\n analyze-edit-blocks.ts\n  analyzeEditBlocks\n analyze-model-usage.ts\n  analyzeModelUsage\n analyze-overages.ts\n  getSubscriptionItemByType getPlanFromPriceId analyzeOverages\n apply-credit-migration.ts\n  applyCreditMigration\n bump-version.ts\n  incrementVersion\n calculate-average-spend.ts\n  calculateAverageSpend\n calculate-dau.ts\n  calculateDAU\n calculate-mrr.ts\n  calculateMRR\n calculate-weekly-usage.ts\n  calculateWeeklyUsage\n count-edit-file.ts\n  countOccurrences parseResponse main\n debug-log-subset.ts\n  copyLastLogLines\n export-user-emails.ts\n  exportUserEmails\n package.json\n patch-dataset-processing/\n  concat-datasets.ts\n  create-training-dataset.ts\n   createTrainingDataset\n  generate-fine-tuning-dataset.ts\n   saveProgress loadProgress generateClaudeSketch createDataset main\n  process-raw-dataset.ts\n   processDataset\n  update-patch.ts\n   updatePatch processDatasetPatches\n  update-sketch.ts\n   updateSketch processDatasetSketches\n  verify-patches.ts\n   verifyPatches\n tsconfig.json\n update-stripe-subscriptions.ts\n  processCustomer\nstack.env\nstart-dev.sh\nstripe-reconciliation-plan.md\ntest/\n __mock-data__/\n  actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS SERVER_ACTIONS\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  app/\n   expected.ts\n    cacheController app\n   new.ts\n   old.ts\n    cacheController app\n  css/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment/\n   expected.ts\n    deleteComment\n   new.ts\n    deleteComment\n   old.ts\n    deleteComment\n  delete-comment2/\n   expected.ts\n    deleteComment\n   old.ts\n    deleteComment\n   patch.ts\n  duplicate-imports/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets getTools executeToolCall\n   old.ts\n    getTools\n  existing-comments/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  function-edit-only/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets\n   old.ts\n    searchManifoldMarkets getTools executeToolCall\n  graph/\n   expected.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   new.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   old.ts\n    loadGraphData createD3Graph ticked highlightNodes setSelectedNode resetGraph zoomToNode resetZoom drag dragstarted dragged dragended\n   patch.ts\n    zoomToNode\n  hallucinated/\n   expected.ts\n    processChunk streamResponse mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n   new.ts\n    processChunk streamResponse\n   old.ts\n    mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n  inbox-screen/\n   expected.tsx\n    InboxScreen\n   new.tsx\n    InboxScreen\n   old.tsx\n    InboxScreen\n   patch\n  indentation/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  index/\n   expected.ts\n    manicode\n   new.ts\n    manicode\n   old.ts\n    manicode\n  knowledge-files/\n   cache-expiration.ts\n    mockFileContext messages expectedFiles\n   crawlee.ts\n    mockFileContext messages expectedFiles\n   delete-comment.ts\n    mockFileContext messages expectedFiles\n  many-updates/\n   expected.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   new.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   old.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse handleReadFiles handleScrapeWebPage\n  missing-line-actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  patch/\n   expected.ts\n    Client connect checkNpmVersion sendUserInput subscribeToResponse warmContextCache setupSubscriptions\n   old.ts\n    Client connect setupSubscriptions checkNpmVersion sendUserInput subscribeToResponse warmContextCache\n   patch.ts\n  process-stream/\n   expected.ts\n    parseAttributes\n   new.ts\n   old.ts\n    parseAttributes\n  remaining-changes/\n   expected.ts\n    processData\n   old.ts\n    processData\n   search-replace.ts\n    processData\n  schema/\n   expected.ts\n    DEFAULT_CACHE_STRATEGY API\n   new.ts\n   old.ts\n    DEFAULT_CACHE_STRATEGY API\n  simple/\n   expected.ts\n   new.ts\n   old.ts\n  system-prompt/\n   expected.ts\n    getSystemPrompt\n   new.ts\n   old.ts\n    getSystemPrompt\n  whitespace/\n   expected.ts\n    processData\n   new.ts\n    processData\n   old.ts\n    processData\n __src__/\n  browser-debugging.test.ts\n  checkpoint-file-manager.test.ts\n  checkpoints.test.ts\n   createMockAgentState on postMessage off\n  env.mjs\n  parse-diff-blocks.test.ts\n  patch.test.ts\n  process-xml-chunks.test.ts\n  quota-manager.test.ts\n  score-tests.ts\n   projectTest\n  setup.ts\n  terminal.test.ts\n  test.knowledge.md\n bunfig.toml\n package.json\n tsconfig.json\ntsconfig.base.json\nweb/\n .eslintignore\n .eslintrc.js\n .github/\n  issue-template.md\n  workflows/\n   i18n.yml\n   lint.yml\n   playwright.yml\n .gitignore\n .prettierignore\n .prettierrc.js\n README.md\n commitlint.config.js\n components.json\n contentlayer.config.ts\n  Doc\n jest.config.js\n jest.setup.js\n knowledge.md\n next.config.mjs\n package.json\n playwright.config.ts\n postcss.config.cjs\n public/\n  codebuff-intro1.webm\n scripts/\n  discord/\n   index.ts\n    main\n   register-commands.ts\n    main\n src/\n  __tests__/\n   e2e/\n    home.spec.ts\n   unit/\n    home.spec.tsx\n  actions/\n   hello-action.ts\n    helloAction\n  app/\n   [sponsee]/\n    page.tsx\n     generateMetadata SponseePage\n   affiliates/\n    actions.ts\n     setAffiliateHandleAction\n    page.tsx\n     SubmitButton SetHandleForm AffiliatesPage\n   analytics.knowledge.md\n   api/\n    api-keys/\n     route.ts\n      GET POST\n    auth/\n     [...nextauth]/\n      auth-options.ts\n       createAndLinkStripeCustomer createInitialCreditGrant sendSignupEventToLoops authOptions session redirect\n      route.ts\n     cli/\n      code/\n       route.ts\n        POST\n      logout/\n       route.ts\n        POST\n      status/\n       route.ts\n        GET\n    feed/\n     route.ts\n      GET\n    healthz/\n     route.ts\n      GET\n    referrals/\n     [code]/\n      route.ts\n       GET\n     helpers.ts\n      processAndGrantReferralCredit redeemReferralCode\n     route.ts\n      GET POST\n    stripe/\n     buy-credits/\n      route.ts\n       POST\n     webhook/\n      route.ts\n       handleCustomerCreated handleCheckoutSessionCompleted handleSubscriptionEvent handleInvoiceCreated handleInvoicePaid\n    user/\n     auto-topup/\n      route.ts\n       POST\n     profile/\n      route.ts\n       GET\n     usage/\n      route.ts\n       GET\n   docs/\n    [category]/\n     layout.tsx\n      generateMetadata CategoryLayout\n     metadata.ts\n      generateMetadata\n     page.tsx\n      CategoryPage\n    layout.tsx\n     DocsLayout\n    page.tsx\n     DocsPage\n   hackathon-april-2025/\n    page.tsx\n   layout.tsx\n    generateMetadata\n   login/\n    page.tsx\n     LoginContent\n   onboard/\n    page.tsx\n   page.tsx\n    SearchParamsHandler Home\n   payment-change/\n    page.tsx\n     PaymentChangeContent\n   payment-success/\n    page.tsx\n     SearchParamsHandler PaymentSuccessContent PaymentSuccessPage\n   pricing/\n    page.tsx\n     CreditVisual PricingCard TeamPlanIllustration PricingPage\n   privacy-policy/\n    page.tsx\n   referrals/\n    [code]/\n     metadata.ts\n      generateMetadata\n     page.tsx\n      RedeemPage\n    layout.tsx\n    page.tsx\n   robots.ts\n    robots\n   sitemap.ts\n    sitemap\n   terms-of-service/\n    page.tsx\n   usage/\n    layout.tsx\n    page.tsx\n    usage-display.tsx\n     UsageDisplay UsageDisplaySkeleton\n  components/\n   BrowserPreview.tsx\n   CookieConsentCard.tsx\n    CookieConsentCard\n   IDEDemo.tsx\n    IDEDemo\n   TerminalDemo.tsx\n   auto-topup/\n    AutoTopupSettings.tsx\n     AutoTopupSettings\n    AutoTopupSettingsForm.tsx\n     AutoTopupSettingsForm\n    AutoTopupSwitch.tsx\n     AutoTopupSwitch\n    constants.ts\n     AUTO_TOPUP_CONSTANTS\n    types.ts\n   card-with-beams.tsx\n   credits/\n    CreditPurchaseSection.tsx\n     CREDIT_OPTIONS CENTS_PER_CREDIT CreditPurchaseSection\n   docs/\n    copy-heading.tsx\n     CopyHeading\n    doc-sidebar.tsx\n     sections DocSidebar fetchNews\n    docs.knowledge.md\n    mdx/\n     code-demo.tsx\n      CodeDemo\n     custom-link.tsx\n      CustomLink\n     markdown-table.tsx\n      MarkdownTable\n     mdx-components.tsx\n      Mdx\n    toc.tsx\n     TableOfContents\n   footer.tsx\n    Footer\n   icons.tsx\n    Icons\n   layout-wrapper.tsx\n    LayoutWrapper\n   navbar/\n    navbar.tsx\n     Navbar\n    user-dropdown.tsx\n     UserDropdown\n   providers/\n    query-client-provider.tsx\n     QueryProvider\n   sign-in/\n    sign-in-button.tsx\n     SignInButton\n    sign-in-card-footer.tsx\n     SignInCardFooter\n   theme-provider.tsx\n    ThemeProvider\n   theme-switcher.tsx\n    ThemeSwitcher\n   ui/\n    background-beams.tsx\n     BackgroundBeams\n    banner.tsx\n     BannerContent Banner\n    button.tsx\n    card.tsx\n    collapsible.tsx\n    credit-confetti.tsx\n     CreditConfetti\n    decorative-blocks.tsx\n     DecorativeBlocks adjustColorBrightness\n    dialog.tsx\n    dropdown-menu.tsx\n    enhanced-copy-button.tsx\n     EnhancedCopyButton TerminalCopyButton\n    footer.tsx\n     Footer\n    hero-buttons.tsx\n     HeroButtons\n    hero.tsx\n     TypingEffect Hero\n    input.tsx\n    install-dialog.tsx\n     InstallDialog\n    label.tsx\n    landing/\n     animated-element.tsx\n      AnimatedElement\n     competition/\n      claude-code.tsx\n       ClaudeCodeVisualization\n      cline.tsx\n       ClineVisualization\n      cursor.tsx\n       CursorMazeVisualization\n      github-copilot.tsx\n       MeltingText MatrixRainEffect GithubCopilotVisualization\n      index.tsx\n       CompetitionSection\n      tabs.tsx\n       competitors CompetitorCard CompetitionTabs\n     constants.ts\n      DEMO_CODE SECTION_THEMES ANIMATION FEATURE_POINTS\n     cta-section.tsx\n      BenefitCard CTASection\n     demo-code-display.tsx\n      DemoCodeDisplay\n     feature/\n      browser-comparison.tsx\n       BrowserComparison\n      chart-illustration.tsx\n       ChartIllustration\n      code-illustration.tsx\n       CodeIllustration\n      highlight-text.tsx\n       HighlightText\n      index.tsx\n       LearnMoreLink AnimatedContent FeatureSection\n      workflow-illustration.tsx\n       WorkflowIllustration\n     testimonials-section.tsx\n      TestimonialsSection\n     types.ts\n    neon-gradient-button.tsx\n     NeonGradientButton\n    radio-group.tsx\n    section.tsx\n     Section\n    separator.tsx\n    sheet.tsx\n    sidebar.tsx\n     useSidebar\n    skeleton-loading.tsx\n     PricingCardSkeleton AutoTopupCardSkeleton\n    skeleton.tsx\n     Skeleton\n    slider.tsx\n    switch.tsx\n    tabs.tsx\n    terminal/\n     index.tsx\n     style.css\n     terminal-input.tsx\n     terminal-output.tsx\n    toast.tsx\n    toaster.tsx\n     Toaster\n    tooltip.tsx\n    use-toast.ts\n     genId reducer dispatch toast useToast\n  content/\n   advanced/\n    claude-code-comparison.mdx\n    how-does-it-work.mdx\n    large-projects.mdx\n    troubleshooting.mdx\n    what-models.mdx\n   case-studies/\n    _cta.mdx\n    benjamin-bryant.mdx\n    oliver-lukesch.mdx\n   help/\n    faq.mdx\n    getting-started.mdx\n    helm.mdx\n   showcase/\n    coming-soon.mdx\n   tips/\n    best-practices.mdx\n    keyboard-shortcuts.mdx\n    knowledge-files.mdx\n    other-use-cases.mdx\n    version-control.mdx\n    where-codebuff-shines.mdx\n  discord/\n   client.ts\n    startDiscordBot\n   rate-limiter.ts\n    isRateLimited\n  env.mjs\n  hooks/\n   use-auto-topup.ts\n    useAutoTopup\n   use-install-dialog.ts\n    useInstallDialog\n   use-mobile.tsx\n    useIsMobile\n   use-user-plan.ts\n    useUserPlan\n  lib/\n   PostHogProvider.tsx\n    usePostHog PostHogProvider\n   SessionProvider.tsx\n   constant.ts\n    siteConfig\n   docs.ts\n    getDocsByCategory getNewsArticles\n   fonts.ts\n    fonts\n   remark-code-to-codedemo.ts\n    remarkCodeToCodeDemo\n   stripe-utils.ts\n    getStripeCustomerId getSubscriptionItemByType getPlanFromPriceId getPlanPriceIds validatePlanChange checkForUnpaidInvoices getTotalReferralCreditsForCustomer\n   testimonials.ts\n    testimonials\n   trackConversions.ts\n    LINKED_IN_CAMPAIGN_ID storeSearchParams trackUpgrade\n   utils.ts\n    cn changeOrUpgrade clamp\n  styles/\n   globals.css\n  types/\n   docs.ts\n   user.ts\n  util/\n   logger.ts\n    logger\n tailwind.config.ts\n tsconfig.json\n\n</project_file_tree>",
        "20000": "# Project file tree\n\nAs Buffy, you have access to all the files in the project.\n\nThe following is the path to the project on the user's computer. It is also the current working directory for terminal commands:\n<project_path>\n/Users/vrkumar/src/venkr/codebuff\n</project_path>\n\nWithin this project directory, here is the file tree. \nNote that the file tree:\n- Is cached from the start of this conversation. Files created after the start of this conversation will not appear.\n- Excludes files that are .gitignored.\n\n<project_file_tree>\n.env.example\n.eslintrc.json\n.github/\n CODEOWNERS\n workflows/\n  ci.yml\n.gitignore\n.manicodeignore\n.prettierrc\n.vscode/\n settings.json\nREADME.md\nauthentication.knowledge.md\nbackend/\n .gitignore\n README.md\n jest.config.js\n jest.setup.js\n knowledge.md\n package.json\n src/\n  __tests__/\n   auto-topup.test.ts\n   check-new-files-necessary.test.ts\n   credit-conversion.test.ts\n   fast-rewrite.test.ts\n    connect\n   generate-diffs-prompt.test.ts\n   main-prompt.integration.test.ts\n    MockWebSocket send close on removeListener\n   main-prompt.test.ts\n    start MockWebSocket send close on removeListener\n   parse-attributes.test.ts\n   process-file-block.test.ts\n    connect\n   process-stream.test.ts\n   test-data/\n    dex-go/\n     edit-snippet.go\n      TaskRunToolCallReconciler initializeTRTC Context TaskRunToolCall bool error SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan string Span processBuiltinFunction Tool Result float64\n     expected.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan Span checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n     original.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC Time checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n   usage-calculation.test.ts\n  api/\n   usage.ts\n    getUserIdFromAuthToken usageHandler\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n  check-terminal-command.ts\n   checkTerminalCommand\n  env.mjs\n  fast-rewrite.ts\n   fastRewrite rewriteWithOpenAI preserveCommentsInEditSnippet shouldAddFilePlaceholders\n  find-files/\n   check-new-files-necessary.ts\n    checkNewFilesNecessary\n   request-files-prompt.ts\n    requestRelevantFiles getRelevantFiles topLevelDirectories getExampleFileList generateNonObviousRequestFilesPrompt generateKeyRequestFilesPrompt secondPassFindAdditionalFiles generateAdditionalFilesPrompt\n  generate-diffs-prompt.ts\n   parseAndGetDiffBlocksSingleFile retryDiffBlocksPrompt\n  get-documentation-for-query.ts\n   getDocumentationForQuery\n  index.ts\n  llm-apis/\n   claude.ts\n    transformMessages promptClaude promptClaudeWithContinuation\n   context7-api.ts\n    listLibraries context7LibrariesPromise fetchContext7LibraryDocumentation\n   deepseek-api.ts\n    transformMessages promptDeepseekStream start promptDeepseek\n   gemini-api.ts\n    transformMessagesToGoogle promptGeminiStream start cancel promptGemini\n   gemini-vertex-api.ts\n    transformToPart transformMessages transformSystem promptGemini\n   gemini-with-fallbacks.ts\n    promptGeminiWithFallbacks\n   message-cost-tracker.ts\n    syncMessageToStripe logSyncFailure insertMessageRecord sendCostResponseToClient updateUserCycleUsage saveMessage\n   open-router.ts\n    promptOpenRouter\n   openai-api.ts\n    getOpenAI transformMessages promptOpenAI promptOpenAIWithContinuation\n   relace-api.ts\n    sendToRelaceLongContext promptRelaceAI rerank\n   vercel-ai-sdk/\n    ai-sdk.ts\n     promptAiSdkStream promptAiSdk transformMessages promptAiSdk_GeminiFormat\n    vertex-finetuned.ts\n     patchedFetchForFinetune patchString vertexFinetuned\n  main-prompt.ts\n   mainPrompt getRelevantFileInfoMessage getFileReadingUpdates getPrintedPaths\n  process-file-block.ts\n   processFileBlock handleLargeFile\n  process-stream.ts\n   parseAttributes\n  prompt-agent-stream.ts\n   getAgentStream\n  system-prompt/\n   agent-instructions.md\n   agent-system-prompt.ts\n    getAgentSystemPrompt\n   prompts.ts\n    knowledgeFilesPrompt getProjectFileTreePrompt getSystemInfoPrompt getGitChangesPrompt gitCommitGuidePrompt\n   save-agent-request.ts\n    saveAgentRequest\n   search-system-prompt.ts\n    getSearchSystemPrompt\n   truncate-file-tree.ts\n    truncateFileTreeBasedOnTokenBudget pruneFileTokenScores\n  tools.ts\n   parseRawToolCall TOOL_LIST TOOLS_WHICH_END_THE_RESPONSE toolsInstructions updateContext updateContextFromToolCalls readFiles writeFile checkTaskFile runTerminalCommand parseToolCalls appendToLog listDirectory summarizeOutput renderSubgoalUpdate transformRunTerminalCommand\n  util/\n   __tests__/\n    messages.test.ts\n    object.test.ts\n    parse-tool-call-xml.test.ts\n    simplify-tool-results.test.ts\n    split-data.test.ts\n   check-auth.ts\n    checkAuth\n   debug.ts\n    DEBUG_MODE debugLog clearDebugLog\n   logger.ts\n    withLoggerContext pinoLogger mixin splitAndLog logger\n   messages.ts\n    messagesWithSystem getMessageText simplifyTerminalHelper trimMessagesToFitTokenLimit getMessagesSubset\n   object.ts\n    stripNullCharsFromObject\n   parse-tool-call-xml.ts\n    parseToolCallXml renderToolResults parseToolResults renderReadFilesResult parseReadFilesResult isToolResult\n   simplify-tool-results.ts\n    simplifyToolResults simplifyReadFileResults simplifyTerminalCommandResults simplifyReadFileToolResult simplifyTerminalCommandToolResult\n   split-data.ts\n    isPlainObject getJsonSize splitString splitObject splitArray splitDataWithLengths splitData\n   token-counter.ts\n    countTokens countTokensJson countTokensForFiles\n  websockets/\n   auth.ts\n    getUserIdFromAuthToken getUserInfoFromAuthToken\n   middleware.ts\n    WebSocketMiddleware use execute run protec\n   server.ts\n    SWITCHBOARD MessageParseError serializeError processMessage listen sendMessage\n   switchboard.ts\n    Switchboard getClient getAll getSubscribers connect disconnect markSeen subscribe unsubscribe\n   websocket-action.ts\n    sendAction getUserIdFromAuthToken genUsageResponse subscribeToAction onWebsocketAction requestFiles requestFile requestOptionalFile\n tsconfig.json\nbigquery-implementation-plan.md\nbun.lock\ncodebuff.json\ncommon/\n knowledge.md\n package.json\n src/\n  actions.ts\n   FileChangeSchema CHANGES ToolCallSchema CLIENT_ACTION_SCHEMA UsageReponseSchema InitResponseSchema ResponseCompleteSchema MessageCostResponseSchema PromptResponseSchema SERVER_ACTION_SCHEMA\n  api-keys/\n   constants.ts\n    ALGORITHM IV_LENGTH AUTH_TAG_LENGTH API_KEY_TYPES KEY_PREFIXES KEY_LENGTHS READABLE_NAME\n   crypto.ts\n    encryptApiKeyInternal decryptApiKeyInternal encryptAndStoreApiKey retrieveAndDecryptApiKey clearApiKey\n  bigquery/\n   client.ts\n    BigQueryClient initialize insertTrace insertRelabel bigquery\n   schema.ts\n    TRACES_SCHEMA RELABELS_SCHEMA\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n   balance-calculator.ts\n    getOrderedActiveGrants updateGrantBalance consumeFromOrderedGrants calculateUsageAndBalance consumeCredits calculateUsageThisCycle\n   billing.knowledge.md\n   conversion.ts\n    getUserCostPerCredit\n   credit-conversion.ts\n    getUserCostPerCredit convertCreditsToUsdCents convertStripeGrantAmountToCredits\n   grant-credits.ts\n    getPreviousFreeGrantAmount calculateTotalReferralBonus grantCreditOperation processAndGrantCredit revokeGrantByOperationId\n   plans.ts\n    getPlanFromPriceId getMonthlyGrantForPlan\n  browser-actions.ts\n   BROWSER_DEFAULTS LogSchema MetricsSchema NetworkEventSchema LogFilterSchema RequiredRetryOptionsSchema OptionalBrowserConfigSchema OptionalStartConfigSchema OptionalNavigateConfigSchema OptionalClickConfigSchema OptionalTypeConfigSchema OptionalScreenshotConfigSchema MAX_MESSAGE_SIZE BrowserResponseChunkSchema ImageContentSchema BrowserResponseSchema RequiredBrowserStartActionSchema BrowserStartActionSchema RequiredBrowserNavigateActionSchema BrowserNavigateActionSchema RequiredBrowserClickActionSchema BrowserClickActionSchema RequiredBrowserTypeActionSchema BrowserTypeActionSchema RequiredBrowserScrollActionSchema OptionalScrollConfigSchema BrowserScrollActionSchema RequiredBrowserScreenshotActionSchema BrowserScreenshotActionSchema RequiredBrowserStopActionSchema BrowserStopActionSchema DiagnosticStepSchema BrowserDiagnoseActionSchema BrowserActionSchema createBrowserActionXML parseBrowserActionXML parseBrowserActionAttributes\n  constants/\n   grant-priorities.ts\n    GRANT_PRIORITIES\n   tools.ts\n    toolSchema TOOL_LIST\n  constants.ts\n   STOP_MARKER FIND_FILES_MARKER EXISTING_CODE_MARKER DEFAULT_IGNORED_FILES CODEBUFF_RATE_LIMIT_INFO CODEBUFF_CLAUDE_FALLBACK_INFO CODEBUFF_INVALID_KEY_INFO ONE_TIME_TAGS FILE_READ_STATUS HIDDEN_FILE_READ_STATUS toOptionalFile REQUEST_CREDIT_SHOW_THRESHOLD MAX_DATE BILLING_PERIOD_DAYS OVERAGE_RATE_PRO OVERAGE_RATE_MOAR_PRO CREDITS_REFERRAL_BONUS AFFILIATE_USER_REFFERAL_LIMIT getPlanDisplayName getUsageLimitFromPlanName UsageLimits PLAN_CONFIGS CREDITS_USAGE_LIMITS costModes getModelForMode claudeModels openaiModels geminiModels openrouterModels deepseekModels finetunedVertexModels models shortModelNames providerModelNames TEST_USER_ID AuthState UserState getUserState\n  db/\n   docker-compose.yml\n   drizzle.config.ts\n   env.mjs\n   index.ts\n   migrations/\n    0000_overjoyed_thing.sql\n    0001_fuzzy_typhoid_mary.sql\n    0002_sticky_dormammu.sql\n    0003_military_owl.sql\n    0004_neat_pet_avengers.sql\n    0005_minor_the_professor.sql\n    0006_first_quasimodo.sql\n    0007_equal_warlock.sql\n    0008_puzzling_carnage.sql\n    0009_bitter_rumiko_fujikawa.sql\n    0010_overjoyed_red_skull.sql\n    0011_familiar_ezekiel_stane.sql\n    0012_fluffy_naoko.sql\n    0013_famous_risque.sql\n    0014_wakeful_sinister_six.sql\n    meta/\n     0000_snapshot.json\n     0001_snapshot.json\n     0002_snapshot.json\n     0003_snapshot.json\n     0004_snapshot.json\n     0005_snapshot.json\n     0006_snapshot.json\n     0007_snapshot.json\n     0008_snapshot.json\n     0009_snapshot.json\n     0010_snapshot.json\n     0011_snapshot.json\n     0012_snapshot.json\n     0013_snapshot.json\n     0014_snapshot.json\n     _journal.json\n   schema.knowledge.md\n   schema.ts\n    ReferralStatus apiKeyTypeEnum grantTypeEnum user account creditLedger syncFailure referral fingerprint message session verificationToken encryptedApiKeys\n  env.mjs\n  project-file-tree.ts\n   DEFAULT_MAX_FILES getProjectFileTree parseGitignore getAllFilePaths flattenTree getLastReadFilePaths isFileIgnored\n  types/\n   agent-state.ts\n    ToolCallSchema ToolResultSchema AgentStateSchema getInitialAgentState\n   grant.ts\n    GrantTypeValues\n   message.ts\n    MessageSchema\n   plan.ts\n   referral.ts\n    ReferralStatusValues\n   tools.ts\n   usage.ts\n    usageDataSchema\n  util/\n   __tests__/\n    messages.test.ts\n    saxy.test.ts\n    string.test.ts\n   array.ts\n    filterDefined buildArray groupConsecutive\n   changes.ts\n    applyChanges applyAndRevertChanges\n   credentials.ts\n    userSchema genAuthCode\n   dates.ts\n    getNextQuotaReset\n   file.ts\n    FileTreeNodeSchema FileVersionSchema ProjectFileContextSchema createWriteFileBlock fileRegex fileWithNoPathRegex parseFileBlocks createMarkdownFileBlock parseMarkdownCodeBlock createSearchReplaceBlock printFileTree printFileTreeWithTokens ensureEndsWithNewline ensureDirectoryExists cleanMarkdownCodeBlock isValidFilePath\n   git.ts\n    hasStagedChanges getStagedChanges commitChanges stageAllChanges stagePatches\n   logger.ts\n    withLoggerContext logger mixin\n   lru-cache.ts\n    LRUCache get set size clear\n   messages.ts\n    limitScreenshots toContentString withCacheControl removeCache\n   min-heap.ts\n    MinHeap getParentIndex getLeftChildIndex getRightChildIndex swap siftUp siftDown insert extractMin size\n   object.ts\n    removeUndefinedProps removeNullOrUndefinedProps addObjects subtractObjects hasChanges hasSignificantDeepChanges filterObject assert\n   patch.ts\n    applyPatch\n   promise.ts\n    INITIAL_RETRY_DELAY withRetry mapAsync sleep withTimeout\n   referral.ts\n    getReferralLink\n   saxy.ts\n    parseAttrs Saxy _write _final parse _wait _unwait _handleTagOpening _parseChunk _isXMLTagStart\n   server/\n    referral.ts\n     hasMaxedReferrals\n   string.knowledge.md\n   string.ts\n    truncateString truncateStringWithMessage isWhitespace replaceNonStandardPlaceholderComments randBoolFromStr pluralize capitalize snakeToTitleCase ensureUrlProtocol safeReplace hasLazyEdit transformJsonInString generateCompactId stripNullChars\n   stripe.ts\n    stripeServer getCurrentSubscription\n   sync-failure.ts\n    logSyncFailure\n  websockets/\n   websocket-client.ts\n    formatState APIRealtimeClient state close connect waitAndReconnect receiveMessage sendMessage sendAction subscribe\n   websocket-schema.ts\n    CLIENT_MESSAGE_SCHEMAS CLIENT_MESSAGE_SCHEMA SERVER_MESSAGE_SCHEMAS SERVER_MESSAGE_SCHEMA\n tsconfig.json\nevals/\n .gitignore\n constants.ts\n  PROMPT_PREFIX\n manifold.test.ts\n package.json\n pglite-demo.test.ts\n scaffolding.ts\n  readMockFile createFileReadingMock getProjectFileContext runMainPrompt runToolCalls loopMainPrompt extractErrorFiles applyAndRevertChangesSequentially resetRepoToCommit\n swe-bench-eval.ts\n  passesSweBenchTests\n swe-bench-ids.ts\n  SWE_BENCH_IDS\n swe-bench.test.ts\n test-repos.json\n test-setup.ts\n  TEST_REPOS_DIR SWE_BENCH_REPO_PATH SWE_BENCH_PYTHON_PATH setupTestEnvironmentVariables ensureTestRepos getTestReposConfig setupSweBenchEnvironment setupTestEnvironment createInitialAgentState\n tsconfig.json\nexported-tokens.json\nhelm-docs-plan.md\nknowledge.md\nnpm-app/\n README.md\n clean-package.js\n jest.config.js\n knowledge.md\n loadEnv.js\n package.json\n src/\n  background-process-manager.ts\n   backgroundProcesses getOutputWithContext getBackgroundProcessInfoString getBackgroundProcessUpdates cleanupReportedProcesses\n  browser-runner.ts\n   BrowserRunner getLogs getNetworkEvents executeWithRetry executeAction logErrorForAnalysis getBrowser startBrowser navigate typeText scroll takeScreenshot attachPageListeners collectPerformanceMetrics collectMetrics filterLogs execute shutdown handleBrowserInstruction activeBrowserRunner\n  chat-storage.ts\n   setMessages\n  checkpoints/\n   checkpoint-manager.ts\n    CheckpointsDisabledError CheckpointManager initWorker runWorkerOperation getBareRepoPath addCheckpoint getLatestCheckpoint restoreCheckointFileState restoreUndoCheckpoint restoreRedoCheckpoint clearCheckpoints getCheckpointsAsString checkpointManager\n   file-manager.ts\n    gitCommandIsAvailable getBareRepoPath hasUnsavedChanges getLatestCommit initializeCheckpointFileManager gitAddAll gitCommit storeFileState restoreFileState\n  cli-handlers/\n   api-key.ts\n    detectApiKey handleApiKeyInput\n   checkpoint.ts\n    checkpointCommands displayCheckpointMenu isCheckpointCommand listCheckpoints handleUndo handleRedo handleRestoreCheckpoint handleClearCheckpoints saveCheckpoint\n   diff.ts\n    handleDiff\n   easter-egg.ts\n    clearScreen generateCPath quadraticBezier generateVerticalLine generateBPath getRandomColor showEasterEgg animate\n  cli.ts\n   CLI setupSignalHandlers initReadlineInterface completer setPrompt freshPrompt printInitialPrompt printDiff handleLine handleUserInput processCommand forwardUserInput returnControlToUser onWebSocketError onWebSocketReconnect handleKeyPress handleSigint handleEscKey handleStopResponse handleExit detectPasting\n  client.ts\n   Client exit initAgentState initFingerprintId getUser connect fetchStoredApiKeyTypes handleAddApiKey handleReferralCode logout login setUsage setupSubscriptions showUsageWarning generateCommitMessage sendUserInput subscribeToResponse getUsage warmContextCache\n  config.ts\n   isProduction websocketUrl websiteUrl backendUrl\n  create-template-project.ts\n   createTemplateProject\n  credentials.ts\n   userFromJson CONFIG_DIR CREDENTIALS_PATH\n  fingerprint.ts\n   calculateFingerprint\n  index.ts\n   codebuff\n  json-config/\n   constants.ts\n    StartupProcessSchema CodebuffConfigSchema\n   dev-process-manager.ts\n    startDevProcesses\n   parser.ts\n    loadCodebuffConfig\n  menu.ts\n   displayGreeting displayMenu\n  project-files.ts\n   currentChatId getProjectDataDir getCurrentChatDir setProjectRoot getProjectRoot getCurrentDirectory initProjectFileContextWithWorker getProjectFileContext getGitChanges getChangesSinceLastFileVersion getFiles getFilesOrNull getExistingFiles addScrapedContentToFiles findKnowledgeFilesInDir getFilesAbsolutePath setFiles getFileBlocks deleteFile\n  tool-handlers.ts\n   handleWriteFile handleScrapeWebPage handleRunTerminalCommand handleCodeSearch formatResult toolHandlers handleToolCall\n  types.ts\n  update-codebuff.ts\n   updateCodebuff getCodebuffNpmVersion isNpmUpToDate detectInstaller runUpdateCodebuff restartCodebuff\n  utils/\n   __tests__/\n    background-process-manager.test.ts\n    response-example-4-files.txt\n    tool-renderers.test.ts\n     processXML write\n    xml-stream-parser.test.ts\n     write\n   detect-shell.ts\n    detectShell\n   spinner.ts\n    Spinner get start stop restoreCursor log rewriteLine\n   system-info.ts\n    getSystemInfo\n   terminal.ts\n    isCommandRunning recreateShell resetShell formatResult runBackgroundCommand runTerminalCommand runCommandPty\n   tool-renderers.ts\n    defaultToolCallRenderer toolRenderers\n   xml-stream-parser.ts\n    createXMLStreamParser\n  web-scraper.ts\n   scrapeWebPage parseUrlsFromContent getScrapedContentBlocks\n  workers/\n   checkpoint-worker.ts\n   project-context.ts\n tsconfig.json\n twitch-plays-codebuff.sh\npackage.json\npackages/\n code-map/\n  languages.ts\n   getLanguageConfig\n  package.json\n  parse.ts\n   DEBUG_PARSING getFileTokenScores parseTokens parseFile\n  test-langs/\n   test.c\n    Greeter create_greeter greet free_greeter print_greeting main\n   test.cpp\n    greet Greeting printGreeting main\n   test.cs\n    IGreeter Greet Greeting PrintGreeting Main\n   test.go\n    Greeter string Greeting Greet PrintGreeting main\n   test.java\n    Greeter greet Greeting printGreeting main\n   test.js\n    greet Greeting printGreeting createGreeter\n   test.php\n    greet Greeting __construct printGreeting createGreeter\n   test.py\n    Greeter greet Greeting print_greeting\n   test.rb\n    Greeter greet prefix Greeting initialize print_greeting\n   test.rs\n    Greeter Greeting new greet main\n   test.ts\n    Greeting greet printGreeting createGreeter\n  tree-sitter-queries/\n   readme.md\n   tree-sitter-c-tags.scm\n   tree-sitter-c_sharp-tags.scm\n   tree-sitter-cpp-tags.scm\n   tree-sitter-go-tags.scm\n   tree-sitter-java-tags.scm\n   tree-sitter-javascript-tags.scm\n   tree-sitter-php-tags.scm\n   tree-sitter-python-tags.scm\n   tree-sitter-ruby-tags.scm\n   tree-sitter-rust-tags.scm\n   tree-sitter-typescript-tags.scm\n  tsconfig.json\npython-app/\n .gitignore\n LICENSE\n README.md\n knowledge.md\n pyproject.toml\n src/\n  codebuff/\n   __init__.py\n    main\nscripts/\n .gitignore\n analyze-edit-blocks.ts\n  analyzeEditBlocks\n analyze-model-usage.ts\n  analyzeModelUsage\n analyze-overages.ts\n  getSubscriptionItemByType getPlanFromPriceId analyzeOverages\n apply-credit-migration.ts\n  applyCreditMigration\n bump-version.ts\n  incrementVersion\n calculate-average-spend.ts\n  calculateAverageSpend\n calculate-dau.ts\n  calculateDAU\n calculate-mrr.ts\n  calculateMRR\n calculate-weekly-usage.ts\n  calculateWeeklyUsage\n count-edit-file.ts\n  countOccurrences parseResponse main\n debug-log-subset.ts\n  copyLastLogLines\n export-user-emails.ts\n  exportUserEmails\n package.json\n patch-dataset-processing/\n  concat-datasets.ts\n  create-training-dataset.ts\n   createTrainingDataset\n  generate-fine-tuning-dataset.ts\n   saveProgress loadProgress generateClaudeSketch createDataset main\n  process-raw-dataset.ts\n   processDataset\n  update-patch.ts\n   updatePatch processDatasetPatches\n  update-sketch.ts\n   updateSketch processDatasetSketches\n  verify-patches.ts\n   verifyPatches\n tsconfig.json\n update-stripe-subscriptions.ts\n  processCustomer\nstack.env\nstart-dev.sh\nstripe-reconciliation-plan.md\ntest/\n __mock-data__/\n  actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS SERVER_ACTIONS\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  app/\n   expected.ts\n    cacheController app\n   new.ts\n   old.ts\n    cacheController app\n  css/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment/\n   expected.ts\n    deleteComment\n   new.ts\n    deleteComment\n   old.ts\n    deleteComment\n  delete-comment2/\n   expected.ts\n    deleteComment\n   old.ts\n    deleteComment\n   patch.ts\n  duplicate-imports/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets getTools executeToolCall\n   old.ts\n    getTools\n  existing-comments/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  function-edit-only/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets\n   old.ts\n    searchManifoldMarkets getTools executeToolCall\n  graph/\n   expected.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   new.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   old.ts\n    loadGraphData createD3Graph ticked highlightNodes setSelectedNode resetGraph zoomToNode resetZoom drag dragstarted dragged dragended\n   patch.ts\n    zoomToNode\n  hallucinated/\n   expected.ts\n    processChunk streamResponse mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n   new.ts\n    processChunk streamResponse\n   old.ts\n    mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n  inbox-screen/\n   expected.tsx\n    InboxScreen\n   new.tsx\n    InboxScreen\n   old.tsx\n    InboxScreen\n   patch\n  indentation/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  index/\n   expected.ts\n    manicode\n   new.ts\n    manicode\n   old.ts\n    manicode\n  knowledge-files/\n   cache-expiration.ts\n    mockFileContext messages expectedFiles\n   crawlee.ts\n    mockFileContext messages expectedFiles\n   delete-comment.ts\n    mockFileContext messages expectedFiles\n  many-updates/\n   expected.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   new.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   old.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse handleReadFiles handleScrapeWebPage\n  missing-line-actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  patch/\n   expected.ts\n    Client connect checkNpmVersion sendUserInput subscribeToResponse warmContextCache setupSubscriptions\n   old.ts\n    Client connect setupSubscriptions checkNpmVersion sendUserInput subscribeToResponse warmContextCache\n   patch.ts\n  process-stream/\n   expected.ts\n    parseAttributes\n   new.ts\n   old.ts\n    parseAttributes\n  remaining-changes/\n   expected.ts\n    processData\n   old.ts\n    processData\n   search-replace.ts\n    processData\n  schema/\n   expected.ts\n    DEFAULT_CACHE_STRATEGY API\n   new.ts\n   old.ts\n    DEFAULT_CACHE_STRATEGY API\n  simple/\n   expected.ts\n   new.ts\n   old.ts\n  system-prompt/\n   expected.ts\n    getSystemPrompt\n   new.ts\n   old.ts\n    getSystemPrompt\n  whitespace/\n   expected.ts\n    processData\n   new.ts\n    processData\n   old.ts\n    processData\n __src__/\n  browser-debugging.test.ts\n  checkpoint-file-manager.test.ts\n  checkpoints.test.ts\n   createMockAgentState on postMessage off\n  env.mjs\n  parse-diff-blocks.test.ts\n  patch.test.ts\n  process-xml-chunks.test.ts\n  quota-manager.test.ts\n  score-tests.ts\n   projectTest\n  setup.ts\n  terminal.test.ts\n  test.knowledge.md\n bunfig.toml\n package.json\n tsconfig.json\ntsconfig.base.json\nweb/\n .eslintignore\n .eslintrc.js\n .github/\n  issue-template.md\n  workflows/\n   i18n.yml\n   lint.yml\n   playwright.yml\n .gitignore\n .prettierignore\n .prettierrc.js\n README.md\n commitlint.config.js\n components.json\n contentlayer.config.ts\n  Doc\n jest.config.js\n jest.setup.js\n knowledge.md\n next.config.mjs\n package.json\n playwright.config.ts\n postcss.config.cjs\n public/\n  codebuff-intro1.webm\n scripts/\n  discord/\n   index.ts\n    main\n   register-commands.ts\n    main\n src/\n  __tests__/\n   e2e/\n    home.spec.ts\n   unit/\n    home.spec.tsx\n  actions/\n   hello-action.ts\n    helloAction\n  app/\n   [sponsee]/\n    page.tsx\n     generateMetadata SponseePage\n   affiliates/\n    actions.ts\n     setAffiliateHandleAction\n    page.tsx\n     SubmitButton SetHandleForm AffiliatesPage\n   analytics.knowledge.md\n   api/\n    api-keys/\n     route.ts\n      GET POST\n    auth/\n     [...nextauth]/\n      auth-options.ts\n       createAndLinkStripeCustomer createInitialCreditGrant sendSignupEventToLoops authOptions session redirect\n      route.ts\n     cli/\n      code/\n       route.ts\n        POST\n      logout/\n       route.ts\n        POST\n      status/\n       route.ts\n        GET\n    feed/\n     route.ts\n      GET\n    healthz/\n     route.ts\n      GET\n    referrals/\n     [code]/\n      route.ts\n       GET\n     helpers.ts\n      processAndGrantReferralCredit redeemReferralCode\n     route.ts\n      GET POST\n    stripe/\n     buy-credits/\n      route.ts\n       POST\n     webhook/\n      route.ts\n       handleCustomerCreated handleCheckoutSessionCompleted handleSubscriptionEvent handleInvoiceCreated handleInvoicePaid\n    user/\n     auto-topup/\n      route.ts\n       POST\n     profile/\n      route.ts\n       GET\n     usage/\n      route.ts\n       GET\n   docs/\n    [category]/\n     layout.tsx\n      generateMetadata CategoryLayout\n     metadata.ts\n      generateMetadata\n     page.tsx\n      CategoryPage\n    layout.tsx\n     DocsLayout\n    page.tsx\n     DocsPage\n   hackathon-april-2025/\n    page.tsx\n   layout.tsx\n    generateMetadata\n   login/\n    page.tsx\n     LoginContent\n   onboard/\n    page.tsx\n   page.tsx\n    SearchParamsHandler Home\n   payment-change/\n    page.tsx\n     PaymentChangeContent\n   payment-success/\n    page.tsx\n     SearchParamsHandler PaymentSuccessContent PaymentSuccessPage\n   pricing/\n    page.tsx\n     CreditVisual PricingCard TeamPlanIllustration PricingPage\n   privacy-policy/\n    page.tsx\n   referrals/\n    [code]/\n     metadata.ts\n      generateMetadata\n     page.tsx\n      RedeemPage\n    layout.tsx\n    page.tsx\n   robots.ts\n    robots\n   sitemap.ts\n    sitemap\n   terms-of-service/\n    page.tsx\n   usage/\n    layout.tsx\n    page.tsx\n    usage-display.tsx\n     UsageDisplay UsageDisplaySkeleton\n  components/\n   BrowserPreview.tsx\n   CookieConsentCard.tsx\n    CookieConsentCard\n   IDEDemo.tsx\n    IDEDemo\n   TerminalDemo.tsx\n   auto-topup/\n    AutoTopupSettings.tsx\n     AutoTopupSettings\n    AutoTopupSettingsForm.tsx\n     AutoTopupSettingsForm\n    AutoTopupSwitch.tsx\n     AutoTopupSwitch\n    constants.ts\n     AUTO_TOPUP_CONSTANTS\n    types.ts\n   card-with-beams.tsx\n   credits/\n    CreditPurchaseSection.tsx\n     CREDIT_OPTIONS CENTS_PER_CREDIT CreditPurchaseSection\n   docs/\n    copy-heading.tsx\n     CopyHeading\n    doc-sidebar.tsx\n     sections DocSidebar fetchNews\n    docs.knowledge.md\n    mdx/\n     code-demo.tsx\n      CodeDemo\n     custom-link.tsx\n      CustomLink\n     markdown-table.tsx\n      MarkdownTable\n     mdx-components.tsx\n      Mdx\n    toc.tsx\n     TableOfContents\n   footer.tsx\n    Footer\n   icons.tsx\n    Icons\n   layout-wrapper.tsx\n    LayoutWrapper\n   navbar/\n    navbar.tsx\n     Navbar\n    user-dropdown.tsx\n     UserDropdown\n   providers/\n    query-client-provider.tsx\n     QueryProvider\n   sign-in/\n    sign-in-button.tsx\n     SignInButton\n    sign-in-card-footer.tsx\n     SignInCardFooter\n   theme-provider.tsx\n    ThemeProvider\n   theme-switcher.tsx\n    ThemeSwitcher\n   ui/\n    background-beams.tsx\n     BackgroundBeams\n    banner.tsx\n     BannerContent Banner\n    button.tsx\n    card.tsx\n    collapsible.tsx\n    credit-confetti.tsx\n     CreditConfetti\n    decorative-blocks.tsx\n     DecorativeBlocks adjustColorBrightness\n    dialog.tsx\n    dropdown-menu.tsx\n    enhanced-copy-button.tsx\n     EnhancedCopyButton TerminalCopyButton\n    footer.tsx\n     Footer\n    hero-buttons.tsx\n     HeroButtons\n    hero.tsx\n     TypingEffect Hero\n    input.tsx\n    install-dialog.tsx\n     InstallDialog\n    label.tsx\n    landing/\n     animated-element.tsx\n      AnimatedElement\n     competition/\n      claude-code.tsx\n       ClaudeCodeVisualization\n      cline.tsx\n       ClineVisualization\n      cursor.tsx\n       CursorMazeVisualization\n      github-copilot.tsx\n       MeltingText MatrixRainEffect GithubCopilotVisualization\n      index.tsx\n       CompetitionSection\n      tabs.tsx\n       competitors CompetitorCard CompetitionTabs\n     constants.ts\n      DEMO_CODE SECTION_THEMES ANIMATION FEATURE_POINTS\n     cta-section.tsx\n      BenefitCard CTASection\n     demo-code-display.tsx\n      DemoCodeDisplay\n     feature/\n      browser-comparison.tsx\n       BrowserComparison\n      chart-illustration.tsx\n       ChartIllustration\n      code-illustration.tsx\n       CodeIllustration\n      highlight-text.tsx\n       HighlightText\n      index.tsx\n       LearnMoreLink AnimatedContent FeatureSection\n      workflow-illustration.tsx\n       WorkflowIllustration\n     testimonials-section.tsx\n      TestimonialsSection\n     types.ts\n    neon-gradient-button.tsx\n     NeonGradientButton\n    radio-group.tsx\n    section.tsx\n     Section\n    separator.tsx\n    sheet.tsx\n    sidebar.tsx\n     useSidebar\n    skeleton-loading.tsx\n     PricingCardSkeleton AutoTopupCardSkeleton\n    skeleton.tsx\n     Skeleton\n    slider.tsx\n    switch.tsx\n    tabs.tsx\n    terminal/\n     index.tsx\n     style.css\n     terminal-input.tsx\n     terminal-output.tsx\n    toast.tsx\n    toaster.tsx\n     Toaster\n    tooltip.tsx\n    use-toast.ts\n     genId reducer dispatch toast useToast\n  content/\n   advanced/\n    claude-code-comparison.mdx\n    how-does-it-work.mdx\n    large-projects.mdx\n    troubleshooting.mdx\n    what-models.mdx\n   case-studies/\n    _cta.mdx\n    benjamin-bryant.mdx\n    oliver-lukesch.mdx\n   help/\n    faq.mdx\n    getting-started.mdx\n    helm.mdx\n   showcase/\n    coming-soon.mdx\n   tips/\n    best-practices.mdx\n    keyboard-shortcuts.mdx\n    knowledge-files.mdx\n    other-use-cases.mdx\n    version-control.mdx\n    where-codebuff-shines.mdx\n  discord/\n   client.ts\n    startDiscordBot\n   rate-limiter.ts\n    isRateLimited\n  env.mjs\n  hooks/\n   use-auto-topup.ts\n    useAutoTopup\n   use-install-dialog.ts\n    useInstallDialog\n   use-mobile.tsx\n    useIsMobile\n   use-user-plan.ts\n    useUserPlan\n  lib/\n   PostHogProvider.tsx\n    usePostHog PostHogProvider\n   SessionProvider.tsx\n   constant.ts\n    siteConfig\n   docs.ts\n    getDocsByCategory getNewsArticles\n   fonts.ts\n    fonts\n   remark-code-to-codedemo.ts\n    remarkCodeToCodeDemo\n   stripe-utils.ts\n    getStripeCustomerId getSubscriptionItemByType getPlanFromPriceId getPlanPriceIds validatePlanChange checkForUnpaidInvoices getTotalReferralCreditsForCustomer\n   testimonials.ts\n    testimonials\n   trackConversions.ts\n    LINKED_IN_CAMPAIGN_ID storeSearchParams trackUpgrade\n   utils.ts\n    cn changeOrUpgrade clamp\n  styles/\n   globals.css\n  types/\n   docs.ts\n   user.ts\n  util/\n   logger.ts\n    logger\n tailwind.config.ts\n tsconfig.json\n\n</project_file_tree>",
        "40000": "# Project file tree\n\nAs Buffy, you have access to all the files in the project.\n\nThe following is the path to the project on the user's computer. It is also the current working directory for terminal commands:\n<project_path>\n/Users/vrkumar/src/venkr/codebuff\n</project_path>\n\nWithin this project directory, here is the file tree. \nNote that the file tree:\n- Is cached from the start of this conversation. Files created after the start of this conversation will not appear.\n- Excludes files that are .gitignored.\n\n<project_file_tree>\n.env.example\n.eslintrc.json\n.github/\n CODEOWNERS\n workflows/\n  ci.yml\n.gitignore\n.manicodeignore\n.prettierrc\n.vscode/\n settings.json\nREADME.md\nauthentication.knowledge.md\nbackend/\n .gitignore\n README.md\n jest.config.js\n jest.setup.js\n knowledge.md\n package.json\n src/\n  __tests__/\n   auto-topup.test.ts\n   check-new-files-necessary.test.ts\n   credit-conversion.test.ts\n   fast-rewrite.test.ts\n    connect\n   generate-diffs-prompt.test.ts\n   main-prompt.integration.test.ts\n    MockWebSocket send close on removeListener\n   main-prompt.test.ts\n    start MockWebSocket send close on removeListener\n   parse-attributes.test.ts\n   process-file-block.test.ts\n    connect\n   process-stream.test.ts\n   test-data/\n    dex-go/\n     edit-snippet.go\n      TaskRunToolCallReconciler initializeTRTC Context TaskRunToolCall bool error SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan string Span processBuiltinFunction Tool Result float64\n     expected.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan Span checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n     original.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC Time checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n   usage-calculation.test.ts\n  api/\n   usage.ts\n    getUserIdFromAuthToken usageHandler\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n  check-terminal-command.ts\n   checkTerminalCommand\n  env.mjs\n  fast-rewrite.ts\n   fastRewrite rewriteWithOpenAI preserveCommentsInEditSnippet shouldAddFilePlaceholders\n  find-files/\n   check-new-files-necessary.ts\n    checkNewFilesNecessary\n   request-files-prompt.ts\n    requestRelevantFiles getRelevantFiles topLevelDirectories getExampleFileList generateNonObviousRequestFilesPrompt generateKeyRequestFilesPrompt secondPassFindAdditionalFiles generateAdditionalFilesPrompt\n  generate-diffs-prompt.ts\n   parseAndGetDiffBlocksSingleFile retryDiffBlocksPrompt\n  get-documentation-for-query.ts\n   getDocumentationForQuery\n  index.ts\n  llm-apis/\n   claude.ts\n    transformMessages promptClaude promptClaudeWithContinuation\n   context7-api.ts\n    listLibraries context7LibrariesPromise fetchContext7LibraryDocumentation\n   deepseek-api.ts\n    transformMessages promptDeepseekStream start promptDeepseek\n   gemini-api.ts\n    transformMessagesToGoogle promptGeminiStream start cancel promptGemini\n   gemini-vertex-api.ts\n    transformToPart transformMessages transformSystem promptGemini\n   gemini-with-fallbacks.ts\n    promptGeminiWithFallbacks\n   message-cost-tracker.ts\n    syncMessageToStripe logSyncFailure insertMessageRecord sendCostResponseToClient updateUserCycleUsage saveMessage\n   open-router.ts\n    promptOpenRouter\n   openai-api.ts\n    getOpenAI transformMessages promptOpenAI promptOpenAIWithContinuation\n   relace-api.ts\n    sendToRelaceLongContext promptRelaceAI rerank\n   vercel-ai-sdk/\n    ai-sdk.ts\n     promptAiSdkStream promptAiSdk transformMessages promptAiSdk_GeminiFormat\n    vertex-finetuned.ts\n     patchedFetchForFinetune patchString vertexFinetuned\n  main-prompt.ts\n   mainPrompt getRelevantFileInfoMessage getFileReadingUpdates getPrintedPaths\n  process-file-block.ts\n   processFileBlock handleLargeFile\n  process-stream.ts\n   parseAttributes\n  prompt-agent-stream.ts\n   getAgentStream\n  system-prompt/\n   agent-instructions.md\n   agent-system-prompt.ts\n    getAgentSystemPrompt\n   prompts.ts\n    knowledgeFilesPrompt getProjectFileTreePrompt getSystemInfoPrompt getGitChangesPrompt gitCommitGuidePrompt\n   save-agent-request.ts\n    saveAgentRequest\n   search-system-prompt.ts\n    getSearchSystemPrompt\n   truncate-file-tree.ts\n    truncateFileTreeBasedOnTokenBudget pruneFileTokenScores\n  tools.ts\n   parseRawToolCall TOOL_LIST TOOLS_WHICH_END_THE_RESPONSE toolsInstructions updateContext updateContextFromToolCalls readFiles writeFile checkTaskFile runTerminalCommand parseToolCalls appendToLog listDirectory summarizeOutput renderSubgoalUpdate transformRunTerminalCommand\n  util/\n   __tests__/\n    messages.test.ts\n    object.test.ts\n    parse-tool-call-xml.test.ts\n    simplify-tool-results.test.ts\n    split-data.test.ts\n   check-auth.ts\n    checkAuth\n   debug.ts\n    DEBUG_MODE debugLog clearDebugLog\n   logger.ts\n    withLoggerContext pinoLogger mixin splitAndLog logger\n   messages.ts\n    messagesWithSystem getMessageText simplifyTerminalHelper trimMessagesToFitTokenLimit getMessagesSubset\n   object.ts\n    stripNullCharsFromObject\n   parse-tool-call-xml.ts\n    parseToolCallXml renderToolResults parseToolResults renderReadFilesResult parseReadFilesResult isToolResult\n   simplify-tool-results.ts\n    simplifyToolResults simplifyReadFileResults simplifyTerminalCommandResults simplifyReadFileToolResult simplifyTerminalCommandToolResult\n   split-data.ts\n    isPlainObject getJsonSize splitString splitObject splitArray splitDataWithLengths splitData\n   token-counter.ts\n    countTokens countTokensJson countTokensForFiles\n  websockets/\n   auth.ts\n    getUserIdFromAuthToken getUserInfoFromAuthToken\n   middleware.ts\n    WebSocketMiddleware use execute run protec\n   server.ts\n    SWITCHBOARD MessageParseError serializeError processMessage listen sendMessage\n   switchboard.ts\n    Switchboard getClient getAll getSubscribers connect disconnect markSeen subscribe unsubscribe\n   websocket-action.ts\n    sendAction getUserIdFromAuthToken genUsageResponse subscribeToAction onWebsocketAction requestFiles requestFile requestOptionalFile\n tsconfig.json\nbigquery-implementation-plan.md\nbun.lock\ncodebuff.json\ncommon/\n knowledge.md\n package.json\n src/\n  actions.ts\n   FileChangeSchema CHANGES ToolCallSchema CLIENT_ACTION_SCHEMA UsageReponseSchema InitResponseSchema ResponseCompleteSchema MessageCostResponseSchema PromptResponseSchema SERVER_ACTION_SCHEMA\n  api-keys/\n   constants.ts\n    ALGORITHM IV_LENGTH AUTH_TAG_LENGTH API_KEY_TYPES KEY_PREFIXES KEY_LENGTHS READABLE_NAME\n   crypto.ts\n    encryptApiKeyInternal decryptApiKeyInternal encryptAndStoreApiKey retrieveAndDecryptApiKey clearApiKey\n  bigquery/\n   client.ts\n    BigQueryClient initialize insertTrace insertRelabel bigquery\n   schema.ts\n    TRACES_SCHEMA RELABELS_SCHEMA\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n   balance-calculator.ts\n    getOrderedActiveGrants updateGrantBalance consumeFromOrderedGrants calculateUsageAndBalance consumeCredits calculateUsageThisCycle\n   billing.knowledge.md\n   conversion.ts\n    getUserCostPerCredit\n   credit-conversion.ts\n    getUserCostPerCredit convertCreditsToUsdCents convertStripeGrantAmountToCredits\n   grant-credits.ts\n    getPreviousFreeGrantAmount calculateTotalReferralBonus grantCreditOperation processAndGrantCredit revokeGrantByOperationId\n   plans.ts\n    getPlanFromPriceId getMonthlyGrantForPlan\n  browser-actions.ts\n   BROWSER_DEFAULTS LogSchema MetricsSchema NetworkEventSchema LogFilterSchema RequiredRetryOptionsSchema OptionalBrowserConfigSchema OptionalStartConfigSchema OptionalNavigateConfigSchema OptionalClickConfigSchema OptionalTypeConfigSchema OptionalScreenshotConfigSchema MAX_MESSAGE_SIZE BrowserResponseChunkSchema ImageContentSchema BrowserResponseSchema RequiredBrowserStartActionSchema BrowserStartActionSchema RequiredBrowserNavigateActionSchema BrowserNavigateActionSchema RequiredBrowserClickActionSchema BrowserClickActionSchema RequiredBrowserTypeActionSchema BrowserTypeActionSchema RequiredBrowserScrollActionSchema OptionalScrollConfigSchema BrowserScrollActionSchema RequiredBrowserScreenshotActionSchema BrowserScreenshotActionSchema RequiredBrowserStopActionSchema BrowserStopActionSchema DiagnosticStepSchema BrowserDiagnoseActionSchema BrowserActionSchema createBrowserActionXML parseBrowserActionXML parseBrowserActionAttributes\n  constants/\n   grant-priorities.ts\n    GRANT_PRIORITIES\n   tools.ts\n    toolSchema TOOL_LIST\n  constants.ts\n   STOP_MARKER FIND_FILES_MARKER EXISTING_CODE_MARKER DEFAULT_IGNORED_FILES CODEBUFF_RATE_LIMIT_INFO CODEBUFF_CLAUDE_FALLBACK_INFO CODEBUFF_INVALID_KEY_INFO ONE_TIME_TAGS FILE_READ_STATUS HIDDEN_FILE_READ_STATUS toOptionalFile REQUEST_CREDIT_SHOW_THRESHOLD MAX_DATE BILLING_PERIOD_DAYS OVERAGE_RATE_PRO OVERAGE_RATE_MOAR_PRO CREDITS_REFERRAL_BONUS AFFILIATE_USER_REFFERAL_LIMIT getPlanDisplayName getUsageLimitFromPlanName UsageLimits PLAN_CONFIGS CREDITS_USAGE_LIMITS costModes getModelForMode claudeModels openaiModels geminiModels openrouterModels deepseekModels finetunedVertexModels models shortModelNames providerModelNames TEST_USER_ID AuthState UserState getUserState\n  db/\n   docker-compose.yml\n   drizzle.config.ts\n   env.mjs\n   index.ts\n   migrations/\n    0000_overjoyed_thing.sql\n    0001_fuzzy_typhoid_mary.sql\n    0002_sticky_dormammu.sql\n    0003_military_owl.sql\n    0004_neat_pet_avengers.sql\n    0005_minor_the_professor.sql\n    0006_first_quasimodo.sql\n    0007_equal_warlock.sql\n    0008_puzzling_carnage.sql\n    0009_bitter_rumiko_fujikawa.sql\n    0010_overjoyed_red_skull.sql\n    0011_familiar_ezekiel_stane.sql\n    0012_fluffy_naoko.sql\n    0013_famous_risque.sql\n    0014_wakeful_sinister_six.sql\n    meta/\n     0000_snapshot.json\n     0001_snapshot.json\n     0002_snapshot.json\n     0003_snapshot.json\n     0004_snapshot.json\n     0005_snapshot.json\n     0006_snapshot.json\n     0007_snapshot.json\n     0008_snapshot.json\n     0009_snapshot.json\n     0010_snapshot.json\n     0011_snapshot.json\n     0012_snapshot.json\n     0013_snapshot.json\n     0014_snapshot.json\n     _journal.json\n   schema.knowledge.md\n   schema.ts\n    ReferralStatus apiKeyTypeEnum grantTypeEnum user account creditLedger syncFailure referral fingerprint message session verificationToken encryptedApiKeys\n  env.mjs\n  project-file-tree.ts\n   DEFAULT_MAX_FILES getProjectFileTree parseGitignore getAllFilePaths flattenTree getLastReadFilePaths isFileIgnored\n  types/\n   agent-state.ts\n    ToolCallSchema ToolResultSchema AgentStateSchema getInitialAgentState\n   grant.ts\n    GrantTypeValues\n   message.ts\n    MessageSchema\n   plan.ts\n   referral.ts\n    ReferralStatusValues\n   tools.ts\n   usage.ts\n    usageDataSchema\n  util/\n   __tests__/\n    messages.test.ts\n    saxy.test.ts\n    string.test.ts\n   array.ts\n    filterDefined buildArray groupConsecutive\n   changes.ts\n    applyChanges applyAndRevertChanges\n   credentials.ts\n    userSchema genAuthCode\n   dates.ts\n    getNextQuotaReset\n   file.ts\n    FileTreeNodeSchema FileVersionSchema ProjectFileContextSchema createWriteFileBlock fileRegex fileWithNoPathRegex parseFileBlocks createMarkdownFileBlock parseMarkdownCodeBlock createSearchReplaceBlock printFileTree printFileTreeWithTokens ensureEndsWithNewline ensureDirectoryExists cleanMarkdownCodeBlock isValidFilePath\n   git.ts\n    hasStagedChanges getStagedChanges commitChanges stageAllChanges stagePatches\n   logger.ts\n    withLoggerContext logger mixin\n   lru-cache.ts\n    LRUCache get set size clear\n   messages.ts\n    limitScreenshots toContentString withCacheControl removeCache\n   min-heap.ts\n    MinHeap getParentIndex getLeftChildIndex getRightChildIndex swap siftUp siftDown insert extractMin size\n   object.ts\n    removeUndefinedProps removeNullOrUndefinedProps addObjects subtractObjects hasChanges hasSignificantDeepChanges filterObject assert\n   patch.ts\n    applyPatch\n   promise.ts\n    INITIAL_RETRY_DELAY withRetry mapAsync sleep withTimeout\n   referral.ts\n    getReferralLink\n   saxy.ts\n    parseAttrs Saxy _write _final parse _wait _unwait _handleTagOpening _parseChunk _isXMLTagStart\n   server/\n    referral.ts\n     hasMaxedReferrals\n   string.knowledge.md\n   string.ts\n    truncateString truncateStringWithMessage isWhitespace replaceNonStandardPlaceholderComments randBoolFromStr pluralize capitalize snakeToTitleCase ensureUrlProtocol safeReplace hasLazyEdit transformJsonInString generateCompactId stripNullChars\n   stripe.ts\n    stripeServer getCurrentSubscription\n   sync-failure.ts\n    logSyncFailure\n  websockets/\n   websocket-client.ts\n    formatState APIRealtimeClient state close connect waitAndReconnect receiveMessage sendMessage sendAction subscribe\n   websocket-schema.ts\n    CLIENT_MESSAGE_SCHEMAS CLIENT_MESSAGE_SCHEMA SERVER_MESSAGE_SCHEMAS SERVER_MESSAGE_SCHEMA\n tsconfig.json\nevals/\n .gitignore\n constants.ts\n  PROMPT_PREFIX\n manifold.test.ts\n package.json\n pglite-demo.test.ts\n scaffolding.ts\n  readMockFile createFileReadingMock getProjectFileContext runMainPrompt runToolCalls loopMainPrompt extractErrorFiles applyAndRevertChangesSequentially resetRepoToCommit\n swe-bench-eval.ts\n  passesSweBenchTests\n swe-bench-ids.ts\n  SWE_BENCH_IDS\n swe-bench.test.ts\n test-repos.json\n test-setup.ts\n  TEST_REPOS_DIR SWE_BENCH_REPO_PATH SWE_BENCH_PYTHON_PATH setupTestEnvironmentVariables ensureTestRepos getTestReposConfig setupSweBenchEnvironment setupTestEnvironment createInitialAgentState\n tsconfig.json\nexported-tokens.json\nhelm-docs-plan.md\nknowledge.md\nnpm-app/\n README.md\n clean-package.js\n jest.config.js\n knowledge.md\n loadEnv.js\n package.json\n src/\n  background-process-manager.ts\n   backgroundProcesses getOutputWithContext getBackgroundProcessInfoString getBackgroundProcessUpdates cleanupReportedProcesses\n  browser-runner.ts\n   BrowserRunner getLogs getNetworkEvents executeWithRetry executeAction logErrorForAnalysis getBrowser startBrowser navigate typeText scroll takeScreenshot attachPageListeners collectPerformanceMetrics collectMetrics filterLogs execute shutdown handleBrowserInstruction activeBrowserRunner\n  chat-storage.ts\n   setMessages\n  checkpoints/\n   checkpoint-manager.ts\n    CheckpointsDisabledError CheckpointManager initWorker runWorkerOperation getBareRepoPath addCheckpoint getLatestCheckpoint restoreCheckointFileState restoreUndoCheckpoint restoreRedoCheckpoint clearCheckpoints getCheckpointsAsString checkpointManager\n   file-manager.ts\n    gitCommandIsAvailable getBareRepoPath hasUnsavedChanges getLatestCommit initializeCheckpointFileManager gitAddAll gitCommit storeFileState restoreFileState\n  cli-handlers/\n   api-key.ts\n    detectApiKey handleApiKeyInput\n   checkpoint.ts\n    checkpointCommands displayCheckpointMenu isCheckpointCommand listCheckpoints handleUndo handleRedo handleRestoreCheckpoint handleClearCheckpoints saveCheckpoint\n   diff.ts\n    handleDiff\n   easter-egg.ts\n    clearScreen generateCPath quadraticBezier generateVerticalLine generateBPath getRandomColor showEasterEgg animate\n  cli.ts\n   CLI setupSignalHandlers initReadlineInterface completer setPrompt freshPrompt printInitialPrompt printDiff handleLine handleUserInput processCommand forwardUserInput returnControlToUser onWebSocketError onWebSocketReconnect handleKeyPress handleSigint handleEscKey handleStopResponse handleExit detectPasting\n  client.ts\n   Client exit initAgentState initFingerprintId getUser connect fetchStoredApiKeyTypes handleAddApiKey handleReferralCode logout login setUsage setupSubscriptions showUsageWarning generateCommitMessage sendUserInput subscribeToResponse getUsage warmContextCache\n  config.ts\n   isProduction websocketUrl websiteUrl backendUrl\n  create-template-project.ts\n   createTemplateProject\n  credentials.ts\n   userFromJson CONFIG_DIR CREDENTIALS_PATH\n  fingerprint.ts\n   calculateFingerprint\n  index.ts\n   codebuff\n  json-config/\n   constants.ts\n    StartupProcessSchema CodebuffConfigSchema\n   dev-process-manager.ts\n    startDevProcesses\n   parser.ts\n    loadCodebuffConfig\n  menu.ts\n   displayGreeting displayMenu\n  project-files.ts\n   currentChatId getProjectDataDir getCurrentChatDir setProjectRoot getProjectRoot getCurrentDirectory initProjectFileContextWithWorker getProjectFileContext getGitChanges getChangesSinceLastFileVersion getFiles getFilesOrNull getExistingFiles addScrapedContentToFiles findKnowledgeFilesInDir getFilesAbsolutePath setFiles getFileBlocks deleteFile\n  tool-handlers.ts\n   handleWriteFile handleScrapeWebPage handleRunTerminalCommand handleCodeSearch formatResult toolHandlers handleToolCall\n  types.ts\n  update-codebuff.ts\n   updateCodebuff getCodebuffNpmVersion isNpmUpToDate detectInstaller runUpdateCodebuff restartCodebuff\n  utils/\n   __tests__/\n    background-process-manager.test.ts\n    response-example-4-files.txt\n    tool-renderers.test.ts\n     processXML write\n    xml-stream-parser.test.ts\n     write\n   detect-shell.ts\n    detectShell\n   spinner.ts\n    Spinner get start stop restoreCursor log rewriteLine\n   system-info.ts\n    getSystemInfo\n   terminal.ts\n    isCommandRunning recreateShell resetShell formatResult runBackgroundCommand runTerminalCommand runCommandPty\n   tool-renderers.ts\n    defaultToolCallRenderer toolRenderers\n   xml-stream-parser.ts\n    createXMLStreamParser\n  web-scraper.ts\n   scrapeWebPage parseUrlsFromContent getScrapedContentBlocks\n  workers/\n   checkpoint-worker.ts\n   project-context.ts\n tsconfig.json\n twitch-plays-codebuff.sh\npackage.json\npackages/\n code-map/\n  languages.ts\n   getLanguageConfig\n  package.json\n  parse.ts\n   DEBUG_PARSING getFileTokenScores parseTokens parseFile\n  test-langs/\n   test.c\n    Greeter create_greeter greet free_greeter print_greeting main\n   test.cpp\n    greet Greeting printGreeting main\n   test.cs\n    IGreeter Greet Greeting PrintGreeting Main\n   test.go\n    Greeter string Greeting Greet PrintGreeting main\n   test.java\n    Greeter greet Greeting printGreeting main\n   test.js\n    greet Greeting printGreeting createGreeter\n   test.php\n    greet Greeting __construct printGreeting createGreeter\n   test.py\n    Greeter greet Greeting print_greeting\n   test.rb\n    Greeter greet prefix Greeting initialize print_greeting\n   test.rs\n    Greeter Greeting new greet main\n   test.ts\n    Greeting greet printGreeting createGreeter\n  tree-sitter-queries/\n   readme.md\n   tree-sitter-c-tags.scm\n   tree-sitter-c_sharp-tags.scm\n   tree-sitter-cpp-tags.scm\n   tree-sitter-go-tags.scm\n   tree-sitter-java-tags.scm\n   tree-sitter-javascript-tags.scm\n   tree-sitter-php-tags.scm\n   tree-sitter-python-tags.scm\n   tree-sitter-ruby-tags.scm\n   tree-sitter-rust-tags.scm\n   tree-sitter-typescript-tags.scm\n  tsconfig.json\npython-app/\n .gitignore\n LICENSE\n README.md\n knowledge.md\n pyproject.toml\n src/\n  codebuff/\n   __init__.py\n    main\nscripts/\n .gitignore\n analyze-edit-blocks.ts\n  analyzeEditBlocks\n analyze-model-usage.ts\n  analyzeModelUsage\n analyze-overages.ts\n  getSubscriptionItemByType getPlanFromPriceId analyzeOverages\n apply-credit-migration.ts\n  applyCreditMigration\n bump-version.ts\n  incrementVersion\n calculate-average-spend.ts\n  calculateAverageSpend\n calculate-dau.ts\n  calculateDAU\n calculate-mrr.ts\n  calculateMRR\n calculate-weekly-usage.ts\n  calculateWeeklyUsage\n count-edit-file.ts\n  countOccurrences parseResponse main\n debug-log-subset.ts\n  copyLastLogLines\n export-user-emails.ts\n  exportUserEmails\n package.json\n patch-dataset-processing/\n  concat-datasets.ts\n  create-training-dataset.ts\n   createTrainingDataset\n  generate-fine-tuning-dataset.ts\n   saveProgress loadProgress generateClaudeSketch createDataset main\n  process-raw-dataset.ts\n   processDataset\n  update-patch.ts\n   updatePatch processDatasetPatches\n  update-sketch.ts\n   updateSketch processDatasetSketches\n  verify-patches.ts\n   verifyPatches\n tsconfig.json\n update-stripe-subscriptions.ts\n  processCustomer\nstack.env\nstart-dev.sh\nstripe-reconciliation-plan.md\ntest/\n __mock-data__/\n  actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS SERVER_ACTIONS\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  app/\n   expected.ts\n    cacheController app\n   new.ts\n   old.ts\n    cacheController app\n  css/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment/\n   expected.ts\n    deleteComment\n   new.ts\n    deleteComment\n   old.ts\n    deleteComment\n  delete-comment2/\n   expected.ts\n    deleteComment\n   old.ts\n    deleteComment\n   patch.ts\n  duplicate-imports/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets getTools executeToolCall\n   old.ts\n    getTools\n  existing-comments/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  function-edit-only/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets\n   old.ts\n    searchManifoldMarkets getTools executeToolCall\n  graph/\n   expected.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   new.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   old.ts\n    loadGraphData createD3Graph ticked highlightNodes setSelectedNode resetGraph zoomToNode resetZoom drag dragstarted dragged dragended\n   patch.ts\n    zoomToNode\n  hallucinated/\n   expected.ts\n    processChunk streamResponse mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n   new.ts\n    processChunk streamResponse\n   old.ts\n    mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n  inbox-screen/\n   expected.tsx\n    InboxScreen\n   new.tsx\n    InboxScreen\n   old.tsx\n    InboxScreen\n   patch\n  indentation/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  index/\n   expected.ts\n    manicode\n   new.ts\n    manicode\n   old.ts\n    manicode\n  knowledge-files/\n   cache-expiration.ts\n    mockFileContext messages expectedFiles\n   crawlee.ts\n    mockFileContext messages expectedFiles\n   delete-comment.ts\n    mockFileContext messages expectedFiles\n  many-updates/\n   expected.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   new.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   old.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse handleReadFiles handleScrapeWebPage\n  missing-line-actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  patch/\n   expected.ts\n    Client connect checkNpmVersion sendUserInput subscribeToResponse warmContextCache setupSubscriptions\n   old.ts\n    Client connect setupSubscriptions checkNpmVersion sendUserInput subscribeToResponse warmContextCache\n   patch.ts\n  process-stream/\n   expected.ts\n    parseAttributes\n   new.ts\n   old.ts\n    parseAttributes\n  remaining-changes/\n   expected.ts\n    processData\n   old.ts\n    processData\n   search-replace.ts\n    processData\n  schema/\n   expected.ts\n    DEFAULT_CACHE_STRATEGY API\n   new.ts\n   old.ts\n    DEFAULT_CACHE_STRATEGY API\n  simple/\n   expected.ts\n   new.ts\n   old.ts\n  system-prompt/\n   expected.ts\n    getSystemPrompt\n   new.ts\n   old.ts\n    getSystemPrompt\n  whitespace/\n   expected.ts\n    processData\n   new.ts\n    processData\n   old.ts\n    processData\n __src__/\n  browser-debugging.test.ts\n  checkpoint-file-manager.test.ts\n  checkpoints.test.ts\n   createMockAgentState on postMessage off\n  env.mjs\n  parse-diff-blocks.test.ts\n  patch.test.ts\n  process-xml-chunks.test.ts\n  quota-manager.test.ts\n  score-tests.ts\n   projectTest\n  setup.ts\n  terminal.test.ts\n  test.knowledge.md\n bunfig.toml\n package.json\n tsconfig.json\ntsconfig.base.json\nweb/\n .eslintignore\n .eslintrc.js\n .github/\n  issue-template.md\n  workflows/\n   i18n.yml\n   lint.yml\n   playwright.yml\n .gitignore\n .prettierignore\n .prettierrc.js\n README.md\n commitlint.config.js\n components.json\n contentlayer.config.ts\n  Doc\n jest.config.js\n jest.setup.js\n knowledge.md\n next.config.mjs\n package.json\n playwright.config.ts\n postcss.config.cjs\n public/\n  codebuff-intro1.webm\n scripts/\n  discord/\n   index.ts\n    main\n   register-commands.ts\n    main\n src/\n  __tests__/\n   e2e/\n    home.spec.ts\n   unit/\n    home.spec.tsx\n  actions/\n   hello-action.ts\n    helloAction\n  app/\n   [sponsee]/\n    page.tsx\n     generateMetadata SponseePage\n   affiliates/\n    actions.ts\n     setAffiliateHandleAction\n    page.tsx\n     SubmitButton SetHandleForm AffiliatesPage\n   analytics.knowledge.md\n   api/\n    api-keys/\n     route.ts\n      GET POST\n    auth/\n     [...nextauth]/\n      auth-options.ts\n       createAndLinkStripeCustomer createInitialCreditGrant sendSignupEventToLoops authOptions session redirect\n      route.ts\n     cli/\n      code/\n       route.ts\n        POST\n      logout/\n       route.ts\n        POST\n      status/\n       route.ts\n        GET\n    feed/\n     route.ts\n      GET\n    healthz/\n     route.ts\n      GET\n    referrals/\n     [code]/\n      route.ts\n       GET\n     helpers.ts\n      processAndGrantReferralCredit redeemReferralCode\n     route.ts\n      GET POST\n    stripe/\n     buy-credits/\n      route.ts\n       POST\n     webhook/\n      route.ts\n       handleCustomerCreated handleCheckoutSessionCompleted handleSubscriptionEvent handleInvoiceCreated handleInvoicePaid\n    user/\n     auto-topup/\n      route.ts\n       POST\n     profile/\n      route.ts\n       GET\n     usage/\n      route.ts\n       GET\n   docs/\n    [category]/\n     layout.tsx\n      generateMetadata CategoryLayout\n     metadata.ts\n      generateMetadata\n     page.tsx\n      CategoryPage\n    layout.tsx\n     DocsLayout\n    page.tsx\n     DocsPage\n   hackathon-april-2025/\n    page.tsx\n   layout.tsx\n    generateMetadata\n   login/\n    page.tsx\n     LoginContent\n   onboard/\n    page.tsx\n   page.tsx\n    SearchParamsHandler Home\n   payment-change/\n    page.tsx\n     PaymentChangeContent\n   payment-success/\n    page.tsx\n     SearchParamsHandler PaymentSuccessContent PaymentSuccessPage\n   pricing/\n    page.tsx\n     CreditVisual PricingCard TeamPlanIllustration PricingPage\n   privacy-policy/\n    page.tsx\n   referrals/\n    [code]/\n     metadata.ts\n      generateMetadata\n     page.tsx\n      RedeemPage\n    layout.tsx\n    page.tsx\n   robots.ts\n    robots\n   sitemap.ts\n    sitemap\n   terms-of-service/\n    page.tsx\n   usage/\n    layout.tsx\n    page.tsx\n    usage-display.tsx\n     UsageDisplay UsageDisplaySkeleton\n  components/\n   BrowserPreview.tsx\n   CookieConsentCard.tsx\n    CookieConsentCard\n   IDEDemo.tsx\n    IDEDemo\n   TerminalDemo.tsx\n   auto-topup/\n    AutoTopupSettings.tsx\n     AutoTopupSettings\n    AutoTopupSettingsForm.tsx\n     AutoTopupSettingsForm\n    AutoTopupSwitch.tsx\n     AutoTopupSwitch\n    constants.ts\n     AUTO_TOPUP_CONSTANTS\n    types.ts\n   card-with-beams.tsx\n   credits/\n    CreditPurchaseSection.tsx\n     CREDIT_OPTIONS CENTS_PER_CREDIT CreditPurchaseSection\n   docs/\n    copy-heading.tsx\n     CopyHeading\n    doc-sidebar.tsx\n     sections DocSidebar fetchNews\n    docs.knowledge.md\n    mdx/\n     code-demo.tsx\n      CodeDemo\n     custom-link.tsx\n      CustomLink\n     markdown-table.tsx\n      MarkdownTable\n     mdx-components.tsx\n      Mdx\n    toc.tsx\n     TableOfContents\n   footer.tsx\n    Footer\n   icons.tsx\n    Icons\n   layout-wrapper.tsx\n    LayoutWrapper\n   navbar/\n    navbar.tsx\n     Navbar\n    user-dropdown.tsx\n     UserDropdown\n   providers/\n    query-client-provider.tsx\n     QueryProvider\n   sign-in/\n    sign-in-button.tsx\n     SignInButton\n    sign-in-card-footer.tsx\n     SignInCardFooter\n   theme-provider.tsx\n    ThemeProvider\n   theme-switcher.tsx\n    ThemeSwitcher\n   ui/\n    background-beams.tsx\n     BackgroundBeams\n    banner.tsx\n     BannerContent Banner\n    button.tsx\n    card.tsx\n    collapsible.tsx\n    credit-confetti.tsx\n     CreditConfetti\n    decorative-blocks.tsx\n     DecorativeBlocks adjustColorBrightness\n    dialog.tsx\n    dropdown-menu.tsx\n    enhanced-copy-button.tsx\n     EnhancedCopyButton TerminalCopyButton\n    footer.tsx\n     Footer\n    hero-buttons.tsx\n     HeroButtons\n    hero.tsx\n     TypingEffect Hero\n    input.tsx\n    install-dialog.tsx\n     InstallDialog\n    label.tsx\n    landing/\n     animated-element.tsx\n      AnimatedElement\n     competition/\n      claude-code.tsx\n       ClaudeCodeVisualization\n      cline.tsx\n       ClineVisualization\n      cursor.tsx\n       CursorMazeVisualization\n      github-copilot.tsx\n       MeltingText MatrixRainEffect GithubCopilotVisualization\n      index.tsx\n       CompetitionSection\n      tabs.tsx\n       competitors CompetitorCard CompetitionTabs\n     constants.ts\n      DEMO_CODE SECTION_THEMES ANIMATION FEATURE_POINTS\n     cta-section.tsx\n      BenefitCard CTASection\n     demo-code-display.tsx\n      DemoCodeDisplay\n     feature/\n      browser-comparison.tsx\n       BrowserComparison\n      chart-illustration.tsx\n       ChartIllustration\n      code-illustration.tsx\n       CodeIllustration\n      highlight-text.tsx\n       HighlightText\n      index.tsx\n       LearnMoreLink AnimatedContent FeatureSection\n      workflow-illustration.tsx\n       WorkflowIllustration\n     testimonials-section.tsx\n      TestimonialsSection\n     types.ts\n    neon-gradient-button.tsx\n     NeonGradientButton\n    radio-group.tsx\n    section.tsx\n     Section\n    separator.tsx\n    sheet.tsx\n    sidebar.tsx\n     useSidebar\n    skeleton-loading.tsx\n     PricingCardSkeleton AutoTopupCardSkeleton\n    skeleton.tsx\n     Skeleton\n    slider.tsx\n    switch.tsx\n    tabs.tsx\n    terminal/\n     index.tsx\n     style.css\n     terminal-input.tsx\n     terminal-output.tsx\n    toast.tsx\n    toaster.tsx\n     Toaster\n    tooltip.tsx\n    use-toast.ts\n     genId reducer dispatch toast useToast\n  content/\n   advanced/\n    claude-code-comparison.mdx\n    how-does-it-work.mdx\n    large-projects.mdx\n    troubleshooting.mdx\n    what-models.mdx\n   case-studies/\n    _cta.mdx\n    benjamin-bryant.mdx\n    oliver-lukesch.mdx\n   help/\n    faq.mdx\n    getting-started.mdx\n    helm.mdx\n   showcase/\n    coming-soon.mdx\n   tips/\n    best-practices.mdx\n    keyboard-shortcuts.mdx\n    knowledge-files.mdx\n    other-use-cases.mdx\n    version-control.mdx\n    where-codebuff-shines.mdx\n  discord/\n   client.ts\n    startDiscordBot\n   rate-limiter.ts\n    isRateLimited\n  env.mjs\n  hooks/\n   use-auto-topup.ts\n    useAutoTopup\n   use-install-dialog.ts\n    useInstallDialog\n   use-mobile.tsx\n    useIsMobile\n   use-user-plan.ts\n    useUserPlan\n  lib/\n   PostHogProvider.tsx\n    usePostHog PostHogProvider\n   SessionProvider.tsx\n   constant.ts\n    siteConfig\n   docs.ts\n    getDocsByCategory getNewsArticles\n   fonts.ts\n    fonts\n   remark-code-to-codedemo.ts\n    remarkCodeToCodeDemo\n   stripe-utils.ts\n    getStripeCustomerId getSubscriptionItemByType getPlanFromPriceId getPlanPriceIds validatePlanChange checkForUnpaidInvoices getTotalReferralCreditsForCustomer\n   testimonials.ts\n    testimonials\n   trackConversions.ts\n    LINKED_IN_CAMPAIGN_ID storeSearchParams trackUpgrade\n   utils.ts\n    cn changeOrUpgrade clamp\n  styles/\n   globals.css\n  types/\n   docs.ts\n   user.ts\n  util/\n   logger.ts\n    logger\n tailwind.config.ts\n tsconfig.json\n\n</project_file_tree>",
        "5000": "# Project file tree\n\nAs Buffy, you have access to all the files in the project.\n\nThe following is the path to the project on the user's computer. It is also the current working directory for terminal commands:\n<project_path>\n/Users/vrkumar/src/venkr/codebuff\n</project_path>\n\nWithin this project directory, here is the file tree. \nNote that the file tree:\n- Is cached from the start of this conversation. Files created after the start of this conversation will not appear.\n- Excludes files that are .gitignored.\n\n<project_file_tree>\n.env.example\n.eslintrc.json\n.github/\n CODEOWNERS\n workflows/\n  ci.yml\n.gitignore\n.manicodeignore\n.prettierrc\n.vscode/\n settings.json\nREADME.md\nauthentication.knowledge.md\nbackend/\n .gitignore\n README.md\n jest.config.js\n jest.setup.js\n knowledge.md\n package.json\n src/\n  __tests__/\n   auto-topup.test.ts\n   check-new-files-necessary.test.ts\n   credit-conversion.test.ts\n   fast-rewrite.test.ts\n   generate-diffs-prompt.test.ts\n   main-prompt.integration.test.ts\n   main-prompt.test.ts\n   parse-attributes.test.ts\n   process-file-block.test.ts\n   process-stream.test.ts\n   usage-calculation.test.ts\n  api/\n   usage.ts\n  billing/\n   auto-topup.ts\n  check-terminal-command.ts\n  env.mjs\n  fast-rewrite.ts\n  find-files/\n   check-new-files-necessary.ts\n   request-files-prompt.ts\n  generate-diffs-prompt.ts\n  get-documentation-for-query.ts\n  index.ts\n  llm-apis/\n   claude.ts\n   context7-api.ts\n   deepseek-api.ts\n   gemini-api.ts\n   gemini-vertex-api.ts\n   gemini-with-fallbacks.ts\n   message-cost-tracker.ts\n   open-router.ts\n   openai-api.ts\n   relace-api.ts\n  main-prompt.ts\n  process-file-block.ts\n  process-stream.ts\n  prompt-agent-stream.ts\n  system-prompt/\n   agent-instructions.md\n   agent-system-prompt.ts\n   prompts.ts\n   save-agent-request.ts\n   search-system-prompt.ts\n   truncate-file-tree.ts\n  tools.ts\n  util/\n   check-auth.ts\n   debug.ts\n   logger.ts\n   messages.ts\n   object.ts\n   parse-tool-call-xml.ts\n   simplify-tool-results.ts\n   split-data.ts\n   token-counter.ts\n  websockets/\n   auth.ts\n   middleware.ts\n   server.ts\n   switchboard.ts\n   websocket-action.ts\n tsconfig.json\nbigquery-implementation-plan.md\nbun.lock\ncodebuff.json\ncommon/\n knowledge.md\n package.json\n src/\n  actions.ts\n  api-keys/\n   constants.ts\n   crypto.ts\n  bigquery/\n   client.ts\n   schema.ts\n  billing/\n   auto-topup.ts\n   balance-calculator.ts\n   billing.knowledge.md\n   conversion.ts\n   credit-conversion.ts\n   grant-credits.ts\n   plans.ts\n  browser-actions.ts\n  constants/\n   grant-priorities.ts\n   tools.ts\n  constants.ts\n  db/\n   docker-compose.yml\n   drizzle.config.ts\n   env.mjs\n   index.ts\n   schema.knowledge.md\n   schema.ts\n  env.mjs\n  project-file-tree.ts\n  types/\n   agent-state.ts\n   grant.ts\n   message.ts\n   plan.ts\n   referral.ts\n   tools.ts\n   usage.ts\n  util/\n   array.ts\n   changes.ts\n   credentials.ts\n   dates.ts\n   file.ts\n   git.ts\n   logger.ts\n   lru-cache.ts\n   messages.ts\n   min-heap.ts\n   object.ts\n   patch.ts\n   promise.ts\n   referral.ts\n   saxy.ts\n   string.knowledge.md\n   string.ts\n   stripe.ts\n   sync-failure.ts\n  websockets/\n   websocket-client.ts\n   websocket-schema.ts\n tsconfig.json\nevals/\n .gitignore\n constants.ts\n manifold.test.ts\n package.json\n pglite-demo.test.ts\n scaffolding.ts\n swe-bench-eval.ts\n swe-bench-ids.ts\n swe-bench.test.ts\n test-repos.json\n test-setup.ts\n tsconfig.json\nexported-tokens.json\nhelm-docs-plan.md\nknowledge.md\nnpm-app/\n README.md\n clean-package.js\n jest.config.js\n knowledge.md\n loadEnv.js\n package.json\n src/\n  background-process-manager.ts\n  browser-runner.ts\n  chat-storage.ts\n  checkpoints/\n   checkpoint-manager.ts\n   file-manager.ts\n  cli-handlers/\n   api-key.ts\n   checkpoint.ts\n   diff.ts\n   easter-egg.ts\n  cli.ts\n  client.ts\n  config.ts\n  create-template-project.ts\n  credentials.ts\n  fingerprint.ts\n  index.ts\n  json-config/\n   constants.ts\n   dev-process-manager.ts\n   parser.ts\n  menu.ts\n  project-files.ts\n  tool-handlers.ts\n  types.ts\n  update-codebuff.ts\n  utils/\n   detect-shell.ts\n   spinner.ts\n   system-info.ts\n   terminal.ts\n   tool-renderers.ts\n   xml-stream-parser.ts\n  web-scraper.ts\n  workers/\n   checkpoint-worker.ts\n   project-context.ts\n tsconfig.json\n twitch-plays-codebuff.sh\npackage.json\npackages/\n code-map/\n  languages.ts\n  package.json\n  parse.ts\n  test-langs/\n   test.c\n   test.cpp\n   test.cs\n   test.go\n   test.java\n   test.js\n   test.php\n   test.py\n   test.rb\n   test.rs\n   test.ts\n  tree-sitter-queries/\n   readme.md\n   tree-sitter-c-tags.scm\n   tree-sitter-c_sharp-tags.scm\n   tree-sitter-cpp-tags.scm\n   tree-sitter-go-tags.scm\n   tree-sitter-java-tags.scm\n   tree-sitter-javascript-tags.scm\n   tree-sitter-php-tags.scm\n   tree-sitter-python-tags.scm\n   tree-sitter-ruby-tags.scm\n   tree-sitter-rust-tags.scm\n   tree-sitter-typescript-tags.scm\n  tsconfig.json\npython-app/\n .gitignore\n LICENSE\n README.md\n knowledge.md\n pyproject.toml\n src/\n  codebuff/\n   __init__.py\nscripts/\n .gitignore\n analyze-edit-blocks.ts\n analyze-model-usage.ts\n analyze-overages.ts\n apply-credit-migration.ts\n bump-version.ts\n calculate-average-spend.ts\n calculate-dau.ts\n calculate-mrr.ts\n calculate-weekly-usage.ts\n count-edit-file.ts\n debug-log-subset.ts\n export-user-emails.ts\n package.json\n patch-dataset-processing/\n  concat-datasets.ts\n  create-training-dataset.ts\n  generate-fine-tuning-dataset.ts\n  process-raw-dataset.ts\n  update-patch.ts\n  update-sketch.ts\n  verify-patches.ts\n tsconfig.json\n update-stripe-subscriptions.ts\nstack.env\nstart-dev.sh\nstripe-reconciliation-plan.md\ntest/\n __mock-data__/\n  actions/\n   expected.ts\n   new.ts\n   old.ts\n  app/\n   expected.ts\n   new.ts\n   old.ts\n  css/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment2/\n   expected.ts\n   old.ts\n   patch.ts\n  duplicate-imports/\n   expected.ts\n   new.ts\n   old.ts\n  existing-comments/\n   expected.ts\n   new.ts\n   old.ts\n  function-edit-only/\n   expected.ts\n   new.ts\n   old.ts\n  graph/\n   expected.ts\n   new.ts\n   old.ts\n   patch.ts\n  hallucinated/\n   expected.ts\n   new.ts\n   old.ts\n  inbox-screen/\n   expected.tsx\n   new.tsx\n   old.tsx\n   patch\n  indentation/\n   expected.ts\n   new.ts\n   old.ts\n  index/\n   expected.ts\n   new.ts\n   old.ts\n  knowledge-files/\n   cache-expiration.ts\n   crawlee.ts\n   delete-comment.ts\n  many-updates/\n   expected.ts\n   new.ts\n   old.ts\n  missing-line-actions/\n   expected.ts\n   new.ts\n   old.ts\n  patch/\n   expected.ts\n   old.ts\n   patch.ts\n  process-stream/\n   expected.ts\n   new.ts\n   old.ts\n  remaining-changes/\n   expected.ts\n   old.ts\n   search-replace.ts\n  schema/\n   expected.ts\n   new.ts\n   old.ts\n  simple/\n   expected.ts\n   new.ts\n   old.ts\n  system-prompt/\n   expected.ts\n   new.ts\n   old.ts\n  whitespace/\n   expected.ts\n   new.ts\n   old.ts\n __src__/\n  browser-debugging.test.ts\n  checkpoint-file-manager.test.ts\n  checkpoints.test.ts\n  env.mjs\n  parse-diff-blocks.test.ts\n  patch.test.ts\n  process-xml-chunks.test.ts\n  quota-manager.test.ts\n  score-tests.ts\n  setup.ts\n  terminal.test.ts\n  test.knowledge.md\n bunfig.toml\n package.json\n tsconfig.json\ntsconfig.base.json\nweb/\n .eslintignore\n .eslintrc.js\n .github/\n  issue-template.md\n  workflows/\n   i18n.yml\n   lint.yml\n   playwright.yml\n .gitignore\n .prettierignore\n .prettierrc.js\n README.md\n commitlint.config.js\n components.json\n contentlayer.config.ts\n jest.config.js\n jest.setup.js\n knowledge.md\n next.config.mjs\n package.json\n playwright.config.ts\n postcss.config.cjs\n public/\n  codebuff-intro1.webm\n scripts/\n  discord/\n   index.ts\n   register-commands.ts\n src/\n  actions/\n   hello-action.ts\n  app/\n   analytics.knowledge.md\n   layout.tsx\n   page.tsx\n   robots.ts\n   sitemap.ts\n   terms-of-service/\n    page.tsx\n   usage/\n    layout.tsx\n    page.tsx\n    usage-display.tsx\n  components/\n   BrowserPreview.tsx\n   CookieConsentCard.tsx\n   IDEDemo.tsx\n   TerminalDemo.tsx\n   auto-topup/\n    AutoTopupSettings.tsx\n    AutoTopupSettingsForm.tsx\n    AutoTopupSwitch.tsx\n    constants.ts\n    types.ts\n   card-with-beams.tsx\n   credits/\n    CreditPurchaseSection.tsx\n   docs/\n    copy-heading.tsx\n    doc-sidebar.tsx\n    docs.knowledge.md\n    toc.tsx\n   footer.tsx\n   icons.tsx\n   layout-wrapper.tsx\n   navbar/\n    navbar.tsx\n    user-dropdown.tsx\n   providers/\n    query-client-provider.tsx\n   sign-in/\n    sign-in-button.tsx\n    sign-in-card-footer.tsx\n   theme-provider.tsx\n   theme-switcher.tsx\n   ui/\n    background-beams.tsx\n    banner.tsx\n    button.tsx\n    card.tsx\n    collapsible.tsx\n    credit-confetti.tsx\n    decorative-blocks.tsx\n    dialog.tsx\n    dropdown-menu.tsx\n    enhanced-copy-button.tsx\n    footer.tsx\n    hero-buttons.tsx\n    hero.tsx\n    input.tsx\n    install-dialog.tsx\n    label.tsx\n    neon-gradient-button.tsx\n    radio-group.tsx\n    section.tsx\n    separator.tsx\n    sheet.tsx\n    sidebar.tsx\n    skeleton-loading.tsx\n    skeleton.tsx\n    slider.tsx\n    switch.tsx\n    tabs.tsx\n    toast.tsx\n    toaster.tsx\n    tooltip.tsx\n    use-toast.ts\n  content/\n   advanced/\n    claude-code-comparison.mdx\n    how-does-it-work.mdx\n    large-projects.mdx\n    troubleshooting.mdx\n    what-models.mdx\n   case-studies/\n    _cta.mdx\n    benjamin-bryant.mdx\n    oliver-lukesch.mdx\n   help/\n    faq.mdx\n    getting-started.mdx\n    helm.mdx\n   showcase/\n    coming-soon.mdx\n   tips/\n    best-practices.mdx\n    keyboard-shortcuts.mdx\n    knowledge-files.mdx\n    other-use-cases.mdx\n    version-control.mdx\n    where-codebuff-shines.mdx\n  discord/\n   client.ts\n   rate-limiter.ts\n  env.mjs\n  hooks/\n   use-auto-topup.ts\n   use-install-dialog.ts\n   use-mobile.tsx\n   use-user-plan.ts\n  lib/\n   PostHogProvider.tsx\n   SessionProvider.tsx\n   constant.ts\n   docs.ts\n   fonts.ts\n   remark-code-to-codedemo.ts\n   stripe-utils.ts\n   testimonials.ts\n   trackConversions.ts\n   utils.ts\n  styles/\n   globals.css\n  types/\n   docs.ts\n   user.ts\n  util/\n   logger.ts\n tailwind.config.ts\n tsconfig.json\n\n</project_file_tree>\n\nNote: The file tree has been truncated to show a subset of files to fit within token limits.",
        "640000": "# Project file tree\n\nAs Buffy, you have access to all the files in the project.\n\nThe following is the path to the project on the user's computer. It is also the current working directory for terminal commands:\n<project_path>\n/Users/vrkumar/src/venkr/codebuff\n</project_path>\n\nWithin this project directory, here is the file tree. \nNote that the file tree:\n- Is cached from the start of this conversation. Files created after the start of this conversation will not appear.\n- Excludes files that are .gitignored.\n\n<project_file_tree>\n.env.example\n.eslintrc.json\n.github/\n CODEOWNERS\n workflows/\n  ci.yml\n.gitignore\n.manicodeignore\n.prettierrc\n.vscode/\n settings.json\nREADME.md\nauthentication.knowledge.md\nbackend/\n .gitignore\n README.md\n jest.config.js\n jest.setup.js\n knowledge.md\n package.json\n src/\n  __tests__/\n   auto-topup.test.ts\n   check-new-files-necessary.test.ts\n   credit-conversion.test.ts\n   fast-rewrite.test.ts\n    connect\n   generate-diffs-prompt.test.ts\n   main-prompt.integration.test.ts\n    MockWebSocket send close on removeListener\n   main-prompt.test.ts\n    start MockWebSocket send close on removeListener\n   parse-attributes.test.ts\n   process-file-block.test.ts\n    connect\n   process-stream.test.ts\n   test-data/\n    dex-go/\n     edit-snippet.go\n      TaskRunToolCallReconciler initializeTRTC Context TaskRunToolCall bool error SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan string Span processBuiltinFunction Tool Result float64\n     expected.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC SpanContext Time endTaskRunToolCallRootSpan SpanContextConfig initializeTaskRunToolCallChildSpan Span checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n     original.go\n      TaskRunToolCallReconciler Client Scheme EventRecorder Server MCPServerManager webhookHandler ResponseWriter Request FunctionCall byte updateTaskRunToolCall Context error TaskRunToolCall ObjectKey convertToFloat float64 int string isMCPTool bool executeMCPTool initializeTRTC Time checkCompletedOrExisting TaskRunList MatchingLabels parseArguments processMCPTool Result getTraditionalTool Tool processDelegateToAgent processBuiltinFunction getExternalAPICredentials Secret processExternalAPI handleUnsupportedToolType getMCPServer MCPServer Reconcile SetupWithManager Manager Stop\n   usage-calculation.test.ts\n  api/\n   usage.ts\n    getUserIdFromAuthToken usageHandler\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n  check-terminal-command.ts\n   checkTerminalCommand\n  env.mjs\n  fast-rewrite.ts\n   fastRewrite rewriteWithOpenAI preserveCommentsInEditSnippet shouldAddFilePlaceholders\n  find-files/\n   check-new-files-necessary.ts\n    checkNewFilesNecessary\n   request-files-prompt.ts\n    requestRelevantFiles getRelevantFiles topLevelDirectories getExampleFileList generateNonObviousRequestFilesPrompt generateKeyRequestFilesPrompt secondPassFindAdditionalFiles generateAdditionalFilesPrompt\n  generate-diffs-prompt.ts\n   parseAndGetDiffBlocksSingleFile retryDiffBlocksPrompt\n  get-documentation-for-query.ts\n   getDocumentationForQuery\n  index.ts\n  llm-apis/\n   claude.ts\n    transformMessages promptClaude promptClaudeWithContinuation\n   context7-api.ts\n    listLibraries context7LibrariesPromise fetchContext7LibraryDocumentation\n   deepseek-api.ts\n    transformMessages promptDeepseekStream start promptDeepseek\n   gemini-api.ts\n    transformMessagesToGoogle promptGeminiStream start cancel promptGemini\n   gemini-vertex-api.ts\n    transformToPart transformMessages transformSystem promptGemini\n   gemini-with-fallbacks.ts\n    promptGeminiWithFallbacks\n   message-cost-tracker.ts\n    syncMessageToStripe logSyncFailure insertMessageRecord sendCostResponseToClient updateUserCycleUsage saveMessage\n   open-router.ts\n    promptOpenRouter\n   openai-api.ts\n    getOpenAI transformMessages promptOpenAI promptOpenAIWithContinuation\n   relace-api.ts\n    sendToRelaceLongContext promptRelaceAI rerank\n   vercel-ai-sdk/\n    ai-sdk.ts\n     promptAiSdkStream promptAiSdk transformMessages promptAiSdk_GeminiFormat\n    vertex-finetuned.ts\n     patchedFetchForFinetune patchString vertexFinetuned\n  main-prompt.ts\n   mainPrompt getRelevantFileInfoMessage getFileReadingUpdates getPrintedPaths\n  process-file-block.ts\n   processFileBlock handleLargeFile\n  process-stream.ts\n   parseAttributes\n  prompt-agent-stream.ts\n   getAgentStream\n  system-prompt/\n   agent-instructions.md\n   agent-system-prompt.ts\n    getAgentSystemPrompt\n   prompts.ts\n    knowledgeFilesPrompt getProjectFileTreePrompt getSystemInfoPrompt getGitChangesPrompt gitCommitGuidePrompt\n   save-agent-request.ts\n    saveAgentRequest\n   search-system-prompt.ts\n    getSearchSystemPrompt\n   truncate-file-tree.ts\n    truncateFileTreeBasedOnTokenBudget pruneFileTokenScores\n  tools.ts\n   parseRawToolCall TOOL_LIST TOOLS_WHICH_END_THE_RESPONSE toolsInstructions updateContext updateContextFromToolCalls readFiles writeFile checkTaskFile runTerminalCommand parseToolCalls appendToLog listDirectory summarizeOutput renderSubgoalUpdate transformRunTerminalCommand\n  util/\n   __tests__/\n    messages.test.ts\n    object.test.ts\n    parse-tool-call-xml.test.ts\n    simplify-tool-results.test.ts\n    split-data.test.ts\n   check-auth.ts\n    checkAuth\n   debug.ts\n    DEBUG_MODE debugLog clearDebugLog\n   logger.ts\n    withLoggerContext pinoLogger mixin splitAndLog logger\n   messages.ts\n    messagesWithSystem getMessageText simplifyTerminalHelper trimMessagesToFitTokenLimit getMessagesSubset\n   object.ts\n    stripNullCharsFromObject\n   parse-tool-call-xml.ts\n    parseToolCallXml renderToolResults parseToolResults renderReadFilesResult parseReadFilesResult isToolResult\n   simplify-tool-results.ts\n    simplifyToolResults simplifyReadFileResults simplifyTerminalCommandResults simplifyReadFileToolResult simplifyTerminalCommandToolResult\n   split-data.ts\n    isPlainObject getJsonSize splitString splitObject splitArray splitDataWithLengths splitData\n   token-counter.ts\n    countTokens countTokensJson countTokensForFiles\n  websockets/\n   auth.ts\n    getUserIdFromAuthToken getUserInfoFromAuthToken\n   middleware.ts\n    WebSocketMiddleware use execute run protec\n   server.ts\n    SWITCHBOARD MessageParseError serializeError processMessage listen sendMessage\n   switchboard.ts\n    Switchboard getClient getAll getSubscribers connect disconnect markSeen subscribe unsubscribe\n   websocket-action.ts\n    sendAction getUserIdFromAuthToken genUsageResponse subscribeToAction onWebsocketAction requestFiles requestFile requestOptionalFile\n tsconfig.json\nbigquery-implementation-plan.md\nbun.lock\ncodebuff.json\ncommon/\n knowledge.md\n package.json\n src/\n  actions.ts\n   FileChangeSchema CHANGES ToolCallSchema CLIENT_ACTION_SCHEMA UsageReponseSchema InitResponseSchema ResponseCompleteSchema MessageCostResponseSchema PromptResponseSchema SERVER_ACTION_SCHEMA\n  api-keys/\n   constants.ts\n    ALGORITHM IV_LENGTH AUTH_TAG_LENGTH API_KEY_TYPES KEY_PREFIXES KEY_LENGTHS READABLE_NAME\n   crypto.ts\n    encryptApiKeyInternal decryptApiKeyInternal encryptAndStoreApiKey retrieveAndDecryptApiKey clearApiKey\n  bigquery/\n   client.ts\n    BigQueryClient initialize insertTrace insertRelabel bigquery\n   schema.ts\n    TRACES_SCHEMA RELABELS_SCHEMA\n  billing/\n   auto-topup.ts\n    AutoTopupValidationError AutoTopupPaymentError validateAutoTopupStatus disableAutoTopup processAutoTopupPayment checkAndTriggerAutoTopup\n   balance-calculator.ts\n    getOrderedActiveGrants updateGrantBalance consumeFromOrderedGrants calculateUsageAndBalance consumeCredits calculateUsageThisCycle\n   billing.knowledge.md\n   conversion.ts\n    getUserCostPerCredit\n   credit-conversion.ts\n    getUserCostPerCredit convertCreditsToUsdCents convertStripeGrantAmountToCredits\n   grant-credits.ts\n    getPreviousFreeGrantAmount calculateTotalReferralBonus grantCreditOperation processAndGrantCredit revokeGrantByOperationId\n   plans.ts\n    getPlanFromPriceId getMonthlyGrantForPlan\n  browser-actions.ts\n   BROWSER_DEFAULTS LogSchema MetricsSchema NetworkEventSchema LogFilterSchema RequiredRetryOptionsSchema OptionalBrowserConfigSchema OptionalStartConfigSchema OptionalNavigateConfigSchema OptionalClickConfigSchema OptionalTypeConfigSchema OptionalScreenshotConfigSchema MAX_MESSAGE_SIZE BrowserResponseChunkSchema ImageContentSchema BrowserResponseSchema RequiredBrowserStartActionSchema BrowserStartActionSchema RequiredBrowserNavigateActionSchema BrowserNavigateActionSchema RequiredBrowserClickActionSchema BrowserClickActionSchema RequiredBrowserTypeActionSchema BrowserTypeActionSchema RequiredBrowserScrollActionSchema OptionalScrollConfigSchema BrowserScrollActionSchema RequiredBrowserScreenshotActionSchema BrowserScreenshotActionSchema RequiredBrowserStopActionSchema BrowserStopActionSchema DiagnosticStepSchema BrowserDiagnoseActionSchema BrowserActionSchema createBrowserActionXML parseBrowserActionXML parseBrowserActionAttributes\n  constants/\n   grant-priorities.ts\n    GRANT_PRIORITIES\n   tools.ts\n    toolSchema TOOL_LIST\n  constants.ts\n   STOP_MARKER FIND_FILES_MARKER EXISTING_CODE_MARKER DEFAULT_IGNORED_FILES CODEBUFF_RATE_LIMIT_INFO CODEBUFF_CLAUDE_FALLBACK_INFO CODEBUFF_INVALID_KEY_INFO ONE_TIME_TAGS FILE_READ_STATUS HIDDEN_FILE_READ_STATUS toOptionalFile REQUEST_CREDIT_SHOW_THRESHOLD MAX_DATE BILLING_PERIOD_DAYS OVERAGE_RATE_PRO OVERAGE_RATE_MOAR_PRO CREDITS_REFERRAL_BONUS AFFILIATE_USER_REFFERAL_LIMIT getPlanDisplayName getUsageLimitFromPlanName UsageLimits PLAN_CONFIGS CREDITS_USAGE_LIMITS costModes getModelForMode claudeModels openaiModels geminiModels openrouterModels deepseekModels finetunedVertexModels models shortModelNames providerModelNames TEST_USER_ID AuthState UserState getUserState\n  db/\n   docker-compose.yml\n   drizzle.config.ts\n   env.mjs\n   index.ts\n   migrations/\n    0000_overjoyed_thing.sql\n    0001_fuzzy_typhoid_mary.sql\n    0002_sticky_dormammu.sql\n    0003_military_owl.sql\n    0004_neat_pet_avengers.sql\n    0005_minor_the_professor.sql\n    0006_first_quasimodo.sql\n    0007_equal_warlock.sql\n    0008_puzzling_carnage.sql\n    0009_bitter_rumiko_fujikawa.sql\n    0010_overjoyed_red_skull.sql\n    0011_familiar_ezekiel_stane.sql\n    0012_fluffy_naoko.sql\n    0013_famous_risque.sql\n    0014_wakeful_sinister_six.sql\n    meta/\n     0000_snapshot.json\n     0001_snapshot.json\n     0002_snapshot.json\n     0003_snapshot.json\n     0004_snapshot.json\n     0005_snapshot.json\n     0006_snapshot.json\n     0007_snapshot.json\n     0008_snapshot.json\n     0009_snapshot.json\n     0010_snapshot.json\n     0011_snapshot.json\n     0012_snapshot.json\n     0013_snapshot.json\n     0014_snapshot.json\n     _journal.json\n   schema.knowledge.md\n   schema.ts\n    ReferralStatus apiKeyTypeEnum grantTypeEnum user account creditLedger syncFailure referral fingerprint message session verificationToken encryptedApiKeys\n  env.mjs\n  project-file-tree.ts\n   DEFAULT_MAX_FILES getProjectFileTree parseGitignore getAllFilePaths flattenTree getLastReadFilePaths isFileIgnored\n  types/\n   agent-state.ts\n    ToolCallSchema ToolResultSchema AgentStateSchema getInitialAgentState\n   grant.ts\n    GrantTypeValues\n   message.ts\n    MessageSchema\n   plan.ts\n   referral.ts\n    ReferralStatusValues\n   tools.ts\n   usage.ts\n    usageDataSchema\n  util/\n   __tests__/\n    messages.test.ts\n    saxy.test.ts\n    string.test.ts\n   array.ts\n    filterDefined buildArray groupConsecutive\n   changes.ts\n    applyChanges applyAndRevertChanges\n   credentials.ts\n    userSchema genAuthCode\n   dates.ts\n    getNextQuotaReset\n   file.ts\n    FileTreeNodeSchema FileVersionSchema ProjectFileContextSchema createWriteFileBlock fileRegex fileWithNoPathRegex parseFileBlocks createMarkdownFileBlock parseMarkdownCodeBlock createSearchReplaceBlock printFileTree printFileTreeWithTokens ensureEndsWithNewline ensureDirectoryExists cleanMarkdownCodeBlock isValidFilePath\n   git.ts\n    hasStagedChanges getStagedChanges commitChanges stageAllChanges stagePatches\n   logger.ts\n    withLoggerContext logger mixin\n   lru-cache.ts\n    LRUCache get set size clear\n   messages.ts\n    limitScreenshots toContentString withCacheControl removeCache\n   min-heap.ts\n    MinHeap getParentIndex getLeftChildIndex getRightChildIndex swap siftUp siftDown insert extractMin size\n   object.ts\n    removeUndefinedProps removeNullOrUndefinedProps addObjects subtractObjects hasChanges hasSignificantDeepChanges filterObject assert\n   patch.ts\n    applyPatch\n   promise.ts\n    INITIAL_RETRY_DELAY withRetry mapAsync sleep withTimeout\n   referral.ts\n    getReferralLink\n   saxy.ts\n    parseAttrs Saxy _write _final parse _wait _unwait _handleTagOpening _parseChunk _isXMLTagStart\n   server/\n    referral.ts\n     hasMaxedReferrals\n   string.knowledge.md\n   string.ts\n    truncateString truncateStringWithMessage isWhitespace replaceNonStandardPlaceholderComments randBoolFromStr pluralize capitalize snakeToTitleCase ensureUrlProtocol safeReplace hasLazyEdit transformJsonInString generateCompactId stripNullChars\n   stripe.ts\n    stripeServer getCurrentSubscription\n   sync-failure.ts\n    logSyncFailure\n  websockets/\n   websocket-client.ts\n    formatState APIRealtimeClient state close connect waitAndReconnect receiveMessage sendMessage sendAction subscribe\n   websocket-schema.ts\n    CLIENT_MESSAGE_SCHEMAS CLIENT_MESSAGE_SCHEMA SERVER_MESSAGE_SCHEMAS SERVER_MESSAGE_SCHEMA\n tsconfig.json\nevals/\n .gitignore\n constants.ts\n  PROMPT_PREFIX\n manifold.test.ts\n package.json\n pglite-demo.test.ts\n scaffolding.ts\n  readMockFile createFileReadingMock getProjectFileContext runMainPrompt runToolCalls loopMainPrompt extractErrorFiles applyAndRevertChangesSequentially resetRepoToCommit\n swe-bench-eval.ts\n  passesSweBenchTests\n swe-bench-ids.ts\n  SWE_BENCH_IDS\n swe-bench.test.ts\n test-repos.json\n test-setup.ts\n  TEST_REPOS_DIR SWE_BENCH_REPO_PATH SWE_BENCH_PYTHON_PATH setupTestEnvironmentVariables ensureTestRepos getTestReposConfig setupSweBenchEnvironment setupTestEnvironment createInitialAgentState\n tsconfig.json\nexported-tokens.json\nhelm-docs-plan.md\nknowledge.md\nnpm-app/\n README.md\n clean-package.js\n jest.config.js\n knowledge.md\n loadEnv.js\n package.json\n src/\n  background-process-manager.ts\n   backgroundProcesses getOutputWithContext getBackgroundProcessInfoString getBackgroundProcessUpdates cleanupReportedProcesses\n  browser-runner.ts\n   BrowserRunner getLogs getNetworkEvents executeWithRetry executeAction logErrorForAnalysis getBrowser startBrowser navigate typeText scroll takeScreenshot attachPageListeners collectPerformanceMetrics collectMetrics filterLogs execute shutdown handleBrowserInstruction activeBrowserRunner\n  chat-storage.ts\n   setMessages\n  checkpoints/\n   checkpoint-manager.ts\n    CheckpointsDisabledError CheckpointManager initWorker runWorkerOperation getBareRepoPath addCheckpoint getLatestCheckpoint restoreCheckointFileState restoreUndoCheckpoint restoreRedoCheckpoint clearCheckpoints getCheckpointsAsString checkpointManager\n   file-manager.ts\n    gitCommandIsAvailable getBareRepoPath hasUnsavedChanges getLatestCommit initializeCheckpointFileManager gitAddAll gitCommit storeFileState restoreFileState\n  cli-handlers/\n   api-key.ts\n    detectApiKey handleApiKeyInput\n   checkpoint.ts\n    checkpointCommands displayCheckpointMenu isCheckpointCommand listCheckpoints handleUndo handleRedo handleRestoreCheckpoint handleClearCheckpoints saveCheckpoint\n   diff.ts\n    handleDiff\n   easter-egg.ts\n    clearScreen generateCPath quadraticBezier generateVerticalLine generateBPath getRandomColor showEasterEgg animate\n  cli.ts\n   CLI setupSignalHandlers initReadlineInterface completer setPrompt freshPrompt printInitialPrompt printDiff handleLine handleUserInput processCommand forwardUserInput returnControlToUser onWebSocketError onWebSocketReconnect handleKeyPress handleSigint handleEscKey handleStopResponse handleExit detectPasting\n  client.ts\n   Client exit initAgentState initFingerprintId getUser connect fetchStoredApiKeyTypes handleAddApiKey handleReferralCode logout login setUsage setupSubscriptions showUsageWarning generateCommitMessage sendUserInput subscribeToResponse getUsage warmContextCache\n  config.ts\n   isProduction websocketUrl websiteUrl backendUrl\n  create-template-project.ts\n   createTemplateProject\n  credentials.ts\n   userFromJson CONFIG_DIR CREDENTIALS_PATH\n  fingerprint.ts\n   calculateFingerprint\n  index.ts\n   codebuff\n  json-config/\n   constants.ts\n    StartupProcessSchema CodebuffConfigSchema\n   dev-process-manager.ts\n    startDevProcesses\n   parser.ts\n    loadCodebuffConfig\n  menu.ts\n   displayGreeting displayMenu\n  project-files.ts\n   currentChatId getProjectDataDir getCurrentChatDir setProjectRoot getProjectRoot getCurrentDirectory initProjectFileContextWithWorker getProjectFileContext getGitChanges getChangesSinceLastFileVersion getFiles getFilesOrNull getExistingFiles addScrapedContentToFiles findKnowledgeFilesInDir getFilesAbsolutePath setFiles getFileBlocks deleteFile\n  tool-handlers.ts\n   handleWriteFile handleScrapeWebPage handleRunTerminalCommand handleCodeSearch formatResult toolHandlers handleToolCall\n  types.ts\n  update-codebuff.ts\n   updateCodebuff getCodebuffNpmVersion isNpmUpToDate detectInstaller runUpdateCodebuff restartCodebuff\n  utils/\n   __tests__/\n    background-process-manager.test.ts\n    response-example-4-files.txt\n    tool-renderers.test.ts\n     processXML write\n    xml-stream-parser.test.ts\n     write\n   detect-shell.ts\n    detectShell\n   spinner.ts\n    Spinner get start stop restoreCursor log rewriteLine\n   system-info.ts\n    getSystemInfo\n   terminal.ts\n    isCommandRunning recreateShell resetShell formatResult runBackgroundCommand runTerminalCommand runCommandPty\n   tool-renderers.ts\n    defaultToolCallRenderer toolRenderers\n   xml-stream-parser.ts\n    createXMLStreamParser\n  web-scraper.ts\n   scrapeWebPage parseUrlsFromContent getScrapedContentBlocks\n  workers/\n   checkpoint-worker.ts\n   project-context.ts\n tsconfig.json\n twitch-plays-codebuff.sh\npackage.json\npackages/\n code-map/\n  languages.ts\n   getLanguageConfig\n  package.json\n  parse.ts\n   DEBUG_PARSING getFileTokenScores parseTokens parseFile\n  test-langs/\n   test.c\n    Greeter create_greeter greet free_greeter print_greeting main\n   test.cpp\n    greet Greeting printGreeting main\n   test.cs\n    IGreeter Greet Greeting PrintGreeting Main\n   test.go\n    Greeter string Greeting Greet PrintGreeting main\n   test.java\n    Greeter greet Greeting printGreeting main\n   test.js\n    greet Greeting printGreeting createGreeter\n   test.php\n    greet Greeting __construct printGreeting createGreeter\n   test.py\n    Greeter greet Greeting print_greeting\n   test.rb\n    Greeter greet prefix Greeting initialize print_greeting\n   test.rs\n    Greeter Greeting new greet main\n   test.ts\n    Greeting greet printGreeting createGreeter\n  tree-sitter-queries/\n   readme.md\n   tree-sitter-c-tags.scm\n   tree-sitter-c_sharp-tags.scm\n   tree-sitter-cpp-tags.scm\n   tree-sitter-go-tags.scm\n   tree-sitter-java-tags.scm\n   tree-sitter-javascript-tags.scm\n   tree-sitter-php-tags.scm\n   tree-sitter-python-tags.scm\n   tree-sitter-ruby-tags.scm\n   tree-sitter-rust-tags.scm\n   tree-sitter-typescript-tags.scm\n  tsconfig.json\npython-app/\n .gitignore\n LICENSE\n README.md\n knowledge.md\n pyproject.toml\n src/\n  codebuff/\n   __init__.py\n    main\nscripts/\n .gitignore\n analyze-edit-blocks.ts\n  analyzeEditBlocks\n analyze-model-usage.ts\n  analyzeModelUsage\n analyze-overages.ts\n  getSubscriptionItemByType getPlanFromPriceId analyzeOverages\n apply-credit-migration.ts\n  applyCreditMigration\n bump-version.ts\n  incrementVersion\n calculate-average-spend.ts\n  calculateAverageSpend\n calculate-dau.ts\n  calculateDAU\n calculate-mrr.ts\n  calculateMRR\n calculate-weekly-usage.ts\n  calculateWeeklyUsage\n count-edit-file.ts\n  countOccurrences parseResponse main\n debug-log-subset.ts\n  copyLastLogLines\n export-user-emails.ts\n  exportUserEmails\n package.json\n patch-dataset-processing/\n  concat-datasets.ts\n  create-training-dataset.ts\n   createTrainingDataset\n  generate-fine-tuning-dataset.ts\n   saveProgress loadProgress generateClaudeSketch createDataset main\n  process-raw-dataset.ts\n   processDataset\n  update-patch.ts\n   updatePatch processDatasetPatches\n  update-sketch.ts\n   updateSketch processDatasetSketches\n  verify-patches.ts\n   verifyPatches\n tsconfig.json\n update-stripe-subscriptions.ts\n  processCustomer\nstack.env\nstart-dev.sh\nstripe-reconciliation-plan.md\ntest/\n __mock-data__/\n  actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS SERVER_ACTIONS\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  app/\n   expected.ts\n    cacheController app\n   new.ts\n   old.ts\n    cacheController app\n  css/\n   expected.ts\n   new.ts\n   old.ts\n  delete-comment/\n   expected.ts\n    deleteComment\n   new.ts\n    deleteComment\n   old.ts\n    deleteComment\n  delete-comment2/\n   expected.ts\n    deleteComment\n   old.ts\n    deleteComment\n   patch.ts\n  duplicate-imports/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets getTools executeToolCall\n   old.ts\n    getTools\n  existing-comments/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  function-edit-only/\n   expected.ts\n    searchManifoldMarkets getTools executeToolCall\n   new.ts\n    searchManifoldMarkets\n   old.ts\n    searchManifoldMarkets getTools executeToolCall\n  graph/\n   expected.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   new.ts\n    loadGraphData createD3Graph ticked drawLink drawNode drawLabel zoomed highlightNodes setSelectedNode resetGraph zoomToNode findNodeAtPosition\n   old.ts\n    loadGraphData createD3Graph ticked highlightNodes setSelectedNode resetGraph zoomToNode resetZoom drag dragstarted dragged dragended\n   patch.ts\n    zoomToNode\n  hallucinated/\n   expected.ts\n    processChunk streamResponse mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n   new.ts\n    processChunk streamResponse\n   old.ts\n    mainPrompt getRelevantFileInfoMessage updateFileContext processFileBlock\n  inbox-screen/\n   expected.tsx\n    InboxScreen\n   new.tsx\n    InboxScreen\n   old.tsx\n    InboxScreen\n   patch\n  indentation/\n   expected.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n   new.ts\n   old.ts\n    manicode promptUser sendUserInputAndAwaitResponse\n  index/\n   expected.ts\n    manicode\n   new.ts\n    manicode\n   old.ts\n    manicode\n  knowledge-files/\n   cache-expiration.ts\n    mockFileContext messages expectedFiles\n   crawlee.ts\n    mockFileContext messages expectedFiles\n   delete-comment.ts\n    mockFileContext messages expectedFiles\n  many-updates/\n   expected.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   new.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse\n   old.ts\n    ChatClient connect setupSubscriptions sendUserInput subscribeToResponse handleReadFiles handleScrapeWebPage\n  missing-line-actions/\n   expected.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   new.ts\n    CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n   old.ts\n    CHANGES ToolCallSchema CLIENT_ACTIONS CLIENT_ACTION_SCHEMA SERVER_ACTIONS SERVER_ACTION_SCHEMA\n  patch/\n   expected.ts\n    Client connect checkNpmVersion sendUserInput subscribeToResponse warmContextCache setupSubscriptions\n   old.ts\n    Client connect setupSubscriptions checkNpmVersion sendUserInput subscribeToResponse warmContextCache\n   patch.ts\n  process-stream/\n   expected.ts\n    parseAttributes\n   new.ts\n   old.ts\n    parseAttributes\n  remaining-changes/\n   expected.ts\n    processData\n   old.ts\n    processData\n   search-replace.ts\n    processData\n  schema/\n   expected.ts\n    DEFAULT_CACHE_STRATEGY API\n   new.ts\n   old.ts\n    DEFAULT_CACHE_STRATEGY API\n  simple/\n   expected.ts\n   new.ts\n   old.ts\n  system-prompt/\n   expected.ts\n    getSystemPrompt\n   new.ts\n   old.ts\n    getSystemPrompt\n  whitespace/\n   expected.ts\n    processData\n   new.ts\n    processData\n   old.ts\n    processData\n __src__/\n  browser-debugging.test.ts\n  checkpoint-file-manager.test.ts\n  checkpoints.test.ts\n   createMockAgentState on postMessage off\n  env.mjs\n  parse-diff-blocks.test.ts\n  patch.test.ts\n  process-xml-chunks.test.ts\n  quota-manager.test.ts\n  score-tests.ts\n   projectTest\n  setup.ts\n  terminal.test.ts\n  test.knowledge.md\n bunfig.toml\n package.json\n tsconfig.json\ntsconfig.base.json\nweb/\n .eslintignore\n .eslintrc.js\n .github/\n  issue-template.md\n  workflows/\n   i18n.yml\n   lint.yml\n   playwright.yml\n .gitignore\n .prettierignore\n .prettierrc.js\n README.md\n commitlint.config.js\n components.json\n contentlayer.config.ts\n  Doc\n jest.config.js\n jest.setup.js\n knowledge.md\n next.config.mjs\n package.json\n playwright.config.ts\n postcss.config.cjs\n public/\n  codebuff-intro1.webm\n scripts/\n  discord/\n   index.ts\n    main\n   register-commands.ts\n    main\n src/\n  __tests__/\n   e2e/\n    home.spec.ts\n   unit/\n    home.spec.tsx\n  actions/\n   hello-action.ts\n    helloAction\n  app/\n   [sponsee]/\n    page.tsx\n     generateMetadata SponseePage\n   affiliates/\n    actions.ts\n     setAffiliateHandleAction\n    page.tsx\n     SubmitButton SetHandleForm AffiliatesPage\n   analytics.knowledge.md\n   api/\n    api-keys/\n     route.ts\n      GET POST\n    auth/\n     [...nextauth]/\n      auth-options.ts\n       createAndLinkStripeCustomer createInitialCreditGrant sendSignupEventToLoops authOptions session redirect\n      route.ts\n     cli/\n      code/\n       route.ts\n        POST\n      logout/\n       route.ts\n        POST\n      status/\n       route.ts\n        GET\n    feed/\n     route.ts\n      GET\n    healthz/\n     route.ts\n      GET\n    referrals/\n     [code]/\n      route.ts\n       GET\n     helpers.ts\n      processAndGrantReferralCredit redeemReferralCode\n     route.ts\n      GET POST\n    stripe/\n     buy-credits/\n      route.ts\n       POST\n     webhook/\n      route.ts\n       handleCustomerCreated handleCheckoutSessionCompleted handleSubscriptionEvent handleInvoiceCreated handleInvoicePaid\n    user/\n     auto-topup/\n      route.ts\n       POST\n     profile/\n      route.ts\n       GET\n     usage/\n      route.ts\n       GET\n   docs/\n    [category]/\n     layout.tsx\n      generateMetadata CategoryLayout\n     metadata.ts\n      generateMetadata\n     page.tsx\n      CategoryPage\n    layout.tsx\n     DocsLayout\n    page.tsx\n     DocsPage\n   hackathon-april-2025/\n    page.tsx\n   layout.tsx\n    generateMetadata\n   login/\n    page.tsx\n     LoginContent\n   onboard/\n    page.tsx\n   page.tsx\n    SearchParamsHandler Home\n   payment-change/\n    page.tsx\n     PaymentChangeContent\n   payment-success/\n    page.tsx\n     SearchParamsHandler PaymentSuccessContent PaymentSuccessPage\n   pricing/\n    page.tsx\n     CreditVisual PricingCard TeamPlanIllustration PricingPage\n   privacy-policy/\n    page.tsx\n   referrals/\n    [code]/\n     metadata.ts\n      generateMetadata\n     page.tsx\n      RedeemPage\n    layout.tsx\n    page.tsx\n   robots.ts\n    robots\n   sitemap.ts\n    sitemap\n   terms-of-service/\n    page.tsx\n   usage/\n    layout.tsx\n    page.tsx\n    usage-display.tsx\n     UsageDisplay UsageDisplaySkeleton\n  components/\n   BrowserPreview.tsx\n   CookieConsentCard.tsx\n    CookieConsentCard\n   IDEDemo.tsx\n    IDEDemo\n   TerminalDemo.tsx\n   auto-topup/\n    AutoTopupSettings.tsx\n     AutoTopupSettings\n    AutoTopupSettingsForm.tsx\n     AutoTopupSettingsForm\n    AutoTopupSwitch.tsx\n     AutoTopupSwitch\n    constants.ts\n     AUTO_TOPUP_CONSTANTS\n    types.ts\n   card-with-beams.tsx\n   credits/\n    CreditPurchaseSection.tsx\n     CREDIT_OPTIONS CENTS_PER_CREDIT CreditPurchaseSection\n   docs/\n    copy-heading.tsx\n     CopyHeading\n    doc-sidebar.tsx\n     sections DocSidebar fetchNews\n    docs.knowledge.md\n    mdx/\n     code-demo.tsx\n      CodeDemo\n     custom-link.tsx\n      CustomLink\n     markdown-table.tsx\n      MarkdownTable\n     mdx-components.tsx\n      Mdx\n    toc.tsx\n     TableOfContents\n   footer.tsx\n    Footer\n   icons.tsx\n    Icons\n   layout-wrapper.tsx\n    LayoutWrapper\n   navbar/\n    navbar.tsx\n     Navbar\n    user-dropdown.tsx\n     UserDropdown\n   providers/\n    query-client-provider.tsx\n     QueryProvider\n   sign-in/\n    sign-in-button.tsx\n     SignInButton\n    sign-in-card-footer.tsx\n     SignInCardFooter\n   theme-provider.tsx\n    ThemeProvider\n   theme-switcher.tsx\n    ThemeSwitcher\n   ui/\n    background-beams.tsx\n     BackgroundBeams\n    banner.tsx\n     BannerContent Banner\n    button.tsx\n    card.tsx\n    collapsible.tsx\n    credit-confetti.tsx\n     CreditConfetti\n    decorative-blocks.tsx\n     DecorativeBlocks adjustColorBrightness\n    dialog.tsx\n    dropdown-menu.tsx\n    enhanced-copy-button.tsx\n     EnhancedCopyButton TerminalCopyButton\n    footer.tsx\n     Footer\n    hero-buttons.tsx\n     HeroButtons\n    hero.tsx\n     TypingEffect Hero\n    input.tsx\n    install-dialog.tsx\n     InstallDialog\n    label.tsx\n    landing/\n     animated-element.tsx\n      AnimatedElement\n     competition/\n      claude-code.tsx\n       ClaudeCodeVisualization\n      cline.tsx\n       ClineVisualization\n      cursor.tsx\n       CursorMazeVisualization\n      github-copilot.tsx\n       MeltingText MatrixRainEffect GithubCopilotVisualization\n      index.tsx\n       CompetitionSection\n      tabs.tsx\n       competitors CompetitorCard CompetitionTabs\n     constants.ts\n      DEMO_CODE SECTION_THEMES ANIMATION FEATURE_POINTS\n     cta-section.tsx\n      BenefitCard CTASection\n     demo-code-display.tsx\n      DemoCodeDisplay\n     feature/\n      browser-comparison.tsx\n       BrowserComparison\n      chart-illustration.tsx\n       ChartIllustration\n      code-illustration.tsx\n       CodeIllustration\n      highlight-text.tsx\n       HighlightText\n      index.tsx\n       LearnMoreLink AnimatedContent FeatureSection\n      workflow-illustration.tsx\n       WorkflowIllustration\n     testimonials-section.tsx\n      TestimonialsSection\n     types.ts\n    neon-gradient-button.tsx\n     NeonGradientButton\n    radio-group.tsx\n    section.tsx\n     Section\n    separator.tsx\n    sheet.tsx\n    sidebar.tsx\n     useSidebar\n    skeleton-loading.tsx\n     PricingCardSkeleton AutoTopupCardSkeleton\n    skeleton.tsx\n     Skeleton\n    slider.tsx\n    switch.tsx\n    tabs.tsx\n    terminal/\n     index.tsx\n     style.css\n     terminal-input.tsx\n     terminal-output.tsx\n    toast.tsx\n    toaster.tsx\n     Toaster\n    tooltip.tsx\n    use-toast.ts\n     genId reducer dispatch toast useToast\n  content/\n   advanced/\n    claude-code-comparison.mdx\n    how-does-it-work.mdx\n    large-projects.mdx\n    troubleshooting.mdx\n    what-models.mdx\n   case-studies/\n    _cta.mdx\n    benjamin-bryant.mdx\n    oliver-lukesch.mdx\n   help/\n    faq.mdx\n    getting-started.mdx\n    helm.mdx\n   showcase/\n    coming-soon.mdx\n   tips/\n    best-practices.mdx\n    keyboard-shortcuts.mdx\n    knowledge-files.mdx\n    other-use-cases.mdx\n    version-control.mdx\n    where-codebuff-shines.mdx\n  discord/\n   client.ts\n    startDiscordBot\n   rate-limiter.ts\n    isRateLimited\n  env.mjs\n  hooks/\n   use-auto-topup.ts\n    useAutoTopup\n   use-install-dialog.ts\n    useInstallDialog\n   use-mobile.tsx\n    useIsMobile\n   use-user-plan.ts\n    useUserPlan\n  lib/\n   PostHogProvider.tsx\n    usePostHog PostHogProvider\n   SessionProvider.tsx\n   constant.ts\n    siteConfig\n   docs.ts\n    getDocsByCategory getNewsArticles\n   fonts.ts\n    fonts\n   remark-code-to-codedemo.ts\n    remarkCodeToCodeDemo\n   stripe-utils.ts\n    getStripeCustomerId getSubscriptionItemByType getPlanFromPriceId getPlanPriceIds validatePlanChange checkForUnpaidInvoices getTotalReferralCreditsForCustomer\n   testimonials.ts\n    testimonials\n   trackConversions.ts\n    LINKED_IN_CAMPAIGN_ID storeSearchParams trackUpgrade\n   utils.ts\n    cn changeOrUpgrade clamp\n  styles/\n   globals.css\n  types/\n   docs.ts\n   user.ts\n  util/\n   logger.ts\n    logger\n tailwind.config.ts\n tsconfig.json\n\n</project_file_tree>"
    },
    "fingerprintId": "",
    "userId": "",
    "userInputId": ""
}