---
title: 'Creating New Agents'
section: 'advanced'
tags: ['customization', 'agent templates', 'agents']
order: 2
---

# Creating New Agents

Create specialized agents from scratch using JSON templates.

**Types:**
- **LLM-based** - Use prompts and language models
- **Programmatic** (coming soon) - Use JavaScript/TypeScript code

## Basic Structure

New agents need `"override": false` and these required fields:

```json
{
  "id": "my-custom-agent",
  "version": "1.0.0",
  "override": false,

  "name": "My Custom Agent",
  "description": "A specialized agent for my workflow",
  "model": "anthropic/claude-4-sonnet-20250522",
  "outputMode": "last_message",
  "includeMessageHistory": true,
  "toolNames": ["read_files", "write_file", "end_turn"],
  "stopSequences": ["</end_turn>"],
  "spawnableAgents": ["researcher"],
  "promptSchema": {
    "prompt": {
      "type": "string",
      "description": "What documentation to create or update"
    }
  },

  "systemPrompt": {
    "path": "./doc-writer-system.md"
  },
  "userInputPrompt": "Create comprehensive documentation based on the user's request. Research existing code and patterns first.",
  "agentStepPrompt": "Continue working on the documentation. Use end_turn when complete."
}
```

**.agents/templates/doc-writer-system.md**

```markdown
# Documentation Writer

Create clear, comprehensive documentation for codebases.

## Guidelines
- Research codebase first
- Use clear, concise language
- Include practical examples
- Test examples for accuracy
```

## More Domain-Specific Examples

### API Documentation Agent

Specialized for documenting REST APIs and GraphQL schemas:

**.agents/templates/api-documenter.json**

```json
{
  "id": "api-documenter",
  "version": "1.0.0",
  "override": false,

  "name": "API Documentation Specialist",
  "description": "Creates comprehensive API documentation with examples and schemas",
  "model": "anthropic/claude-4-sonnet-20250522",
  "outputMode": "last_message",
  "includeMessageHistory": true,

  "toolNames": ["read_files", "code_search", "write_file", "spawn_agents", "end_turn"],
  "stopSequences": ["</end_turn>"],
  "spawnableAgents": ["researcher"],

  "promptSchema": {
    "prompt": {
      "type": "string",
      "description": "What API endpoints or schemas to document"
    }
  },

  "systemPrompt": "You are an API documentation specialist. Create clear, comprehensive documentation for REST APIs and GraphQL schemas with examples, request/response formats, and error codes.",
  "userInputPrompt": "Analyze the specified API endpoints and create detailed documentation including examples, parameters, and response schemas.",
  "agentStepPrompt": "Continue documenting the API. Include practical examples and edge cases. Use end_turn when complete."
}
```

### Database Migration Agent

Specialized for creating and reviewing database migrations:

**.agents/templates/migration-specialist.json**

```json
{
  "id": "migration-specialist",
  "version": "1.0.0",
  "override": false,

  "name": "Database Migration Specialist",
  "description": "Creates safe, reversible database migrations with proper indexing",
  "model": "anthropic/claude-4-sonnet-20250522",
  "outputMode": "last_message",
  "includeMessageHistory": true,

  "toolNames": ["read_files", "write_file", "code_search", "run_terminal_command", "end_turn"],
  "stopSequences": ["</end_turn>"],
  "spawnableAgents": ["reviewer"],

  "systemPrompt": {
    "path": "./migration-guidelines.md"
  },
  "userInputPrompt": "Create a database migration for the requested schema changes. Ensure it's reversible and includes proper indexing.",
  "agentStepPrompt": "Continue working on the migration. Test it if possible and spawn a reviewer to check for issues."
}
```

**.agents/templates/migration-guidelines.md**

```markdown
# Database Migration Guidelines

## Safety First
- Always create reversible migrations (up and down)
- Test migrations on a copy of production data
- Add indexes for new foreign keys
- Use transactions where supported

## Performance Considerations
- Avoid locking tables during peak hours
- Use `ADD COLUMN` with defaults carefully
- Consider batching large data changes
- Monitor migration execution time

## Best Practices
- Include descriptive migration names
- Add comments explaining complex changes
- Validate data integrity after migration
- Keep migrations atomic and focused
```

## Programmatic Agents

**Coming Soon** - Use JavaScript/TypeScript for complex orchestration logic.

## Best Practices

1. **Start small** - Begin with overrides before new agents
2. **Experiment** - Try different tool/prompt combinations
3. **Share** - Version control your `.agents/` directory
4. **Iterate** - Improve based on usage
