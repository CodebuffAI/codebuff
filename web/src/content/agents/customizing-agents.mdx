---
title: 'Customizing Agents'
section: 'advanced'
tags: ['customization', 'agent templates', 'agents']
order: 1
---

# Customizing Agents

Create specialized agents from scratch using JSON templates in `.agents/templates/`:

```markdown
.agents/templates/
├── my-custom-agent.json
└── security-coordinator.json
```

## Example: Security Coordinator Agent

Create a specialized agent that provides guidance to other agents when spawning them:

**.agents/templates/security-coordinator.json**

```json
{
  "id": "security-coordinator",
  "version": "1.0.0",
  "override": false,

  "name": "Security Coordinator",
  "purpose": "Coordinates security-focused development workflows",
  "model": "anthropic/claude-4-sonnet-20250522",
  "outputMode": "last_message",
  "includeMessageHistory": true,

  "toolNames": ["read_files", "spawn_agents", "code_search", "end_turn"],
  "spawnableAgents": ["reviewer", "researcher", "file_picker"],

  "promptSchema": {
    "prompt": {
      "type": "string",
      "description": "Security analysis or coordination task"
    }
  },
  "parentInstructions": {
    "reviewer": "Security-sensitive code implemented? I must check for SQL injection, XSS, authentication bypasses, and input validation.",
    "researcher": "Need security best practices or vulnerability info? Spawn me for OWASP guidelines and technology-specific threat research.",
    "file_picker": "Security architecture understanding requires spawning me - I'll locate authentication configs, security middleware, and access control files."
  },

  "systemPrompt": "You are a security coordinator responsible for ensuring secure development practices.",
  "userInputPrompt": "Analyze the security implications of the request and coordinate appropriate security-focused agents.",
  "agentStepPrompt": "Continue security analysis and spawn relevant agents with security-focused instructions."
}
```

**How parent instructions work:**
- When `security-coordinator` spawns a `reviewer`, the reviewer automatically receives the security-focused instruction
- Multiple agents can provide instructions for the same target - all instructions are combined
- Instructions are injected into the target agent's `userInputPrompt` automatically

## Available Fields

**Core:** `model`, `toolNames`, `spawnableAgents`
**Prompts:** `systemPrompt`, `userInputPrompt`, `agentStepPrompt`
**Parent Instructions:** `parentInstructions` - Guide spawned agents

## Built-in Agents

- `CodebuffAI/base` - Main coding assistant
- `CodebuffAI/reviewer` - Code review
- `CodebuffAI/thinker` - Deep thinking
- `CodebuffAI/researcher` - Research & docs
- `CodebuffAI/planner` - Planning & architecture
- `CodebuffAI/file-picker` - File discovery

## Troubleshooting

**Agent not loading:** Check JSON syntax, file location in `.agents/templates/`
**Prompts not applying:** Verify file paths are relative to project root
**Path errors:** Use `.agents/templates/my-file.md` format

**Debug tips:**
1. Validate JSON: `cat file.json | jq`
2. Restart Codebuff to see errors
3. Test with `--agent <agent-id>` to debug specific agents

**Next:** [Create new agents](/docs/agents/creating-new-agents) or see [troubleshooting guide](/docs/agents/troubleshooting)
